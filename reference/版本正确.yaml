openapi: 3.0.2
info:
  title: Qianmo API
  version: 1.0.0
servers:
  - url: 'http://localhost:8080/api'
    description: 本地测试
  - url: 'https://api.staging.qianmo8.com/api'
    description: Staging
paths:
  /auth/v1/signin/one-step:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OneStepLoginRequest'
        required: true
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignInPhoneResponse'
          description: 登录成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: 验证码错误
      security:
        - {}
      operationId: oneStepLoginUseMobile
      summary: 本机手机号一键登录
  /auth/v1/signin/phone:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInPhoneRequest'
        required: true
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignInPhoneResponse'
          description: 登录成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: 验证码错误
      security:
        - {}
      operationId: signInByPhone
      summary: 手机号登录（短信、一键登录）
  /auth/v1/signin/apple:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInAppleRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignInThirdPartyResponse'
          description: 登录成功
      operationId: signInByApple
      summary: 苹果登录
    delete:
      responses:
        '200':
          description: ok
      operationId: unbindAppleId
      summary: 取消苹果登录的绑定
  /auth/v1/signin/wechat:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInWeChatRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignInThirdPartyResponse'
          description: 登录成功
      operationId: signInByWeChat
      summary: 第三方微信登录
    delete:
      responses:
        '200':
          description: ok
      operationId: unbindWeChat
      summary: 解除微信登录
  /auth/v1/signin/qq:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInQQRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignInThirdPartyResponse'
          description: ok
      operationId: signInByQQ
      summary: 通过QQ登录
    delete:
      responses:
        '200':
          description: ok
      operationId: unbindQQ
      summary: 解除QQ绑定
  /auth/v1/signin/send_sms_code:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendSmsCodeRequest'
        required: true
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaptchaActionResponse'
              examples:
                直接发送成功:
                  value:
                    bizCode: 200
                需要显示人机交互验证:
                  value:
                    bizCode: 400
          description: |-
            发送短信验证码成功，或需要二次验证：
            100, 200 验证通过
            400, 600, 700 需要二次验证
            800, 900 拒绝
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaptchaActionResponse'
              examples:
                '800, 900 拒绝':
                  value:
                    bizCode: 800
          description: '800, 900 拒绝情况'
      security:
        - {}
      operationId: signInSendSmsCode
      summary: 发送短信，附带阿里云验证
  /auth/v1/signin/aj/get_block_puzzle:
    get:
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlockPuzzleResponse'
          description: ok
      operationId: getBlockPuzzle
      summary: 获取滑块验证的拼图
  /auth/v1/revoke:
    post:
      tags:
        - Auth
      responses:
        '200':
          description: ok
      operationId: revokeToken
      summary: 使token失效
  /auth/v1/refresh:
    post:
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
          description: ok
      operationId: refreshToken
      summary: 刷新JWT token
  /demo/test:
    get:
      tags:
        - Demo
      responses:
        '200':
          content:
            text/plain: {}
          description: 示例返回
      operationId: demoTest
  /identity/v1/cloud/auth:
    get:
      tags:
        - identity
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdentityVerifyResultResponse'
          description: ok
      operationId: getVerifyResult
      summary: 获取当前实名认证请求的认证状态和认证资料
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IdentityVerifyTokenRequest'
        required: true
      tags:
        - identity
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdentityVerifyTokenResponse'
          description: ok
      operationId: requestVerifyToken
      summary: 发送实名认证请求，返回实名认证的token（30分钟内有效）
    parameters:
      - name: biz_id
        description: '认证ID, 由接入方指定, 发起不同的认证任务需要更换不同的认证ID'
        schema:
          type: string
        in: query
        required: true
      - name: biz_type
        description: 实人认证控制台上创建场景时对应的场景标识
        schema:
          type: string
        in: query
        required: true
  /identity/v1/my:
    get:
      tags:
        - identity
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdentityVerifyResultResponse'
          description: ok
      operationId: isUserIdentified
      summary: 查询用户是否已实名认证
  /creator/v1/certification/my:
    get:
      tags:
        - creator
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CertifiedCreatorVO'
          description: ok
      operationId: getCertifiedCreatorInfo
      summary: 获取创作者的认证信息
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CertifiedCreatorVO'
        required: true
      tags:
        - creator
      responses:
        '200':
          description: ok
      operationId: certifyCreator
      summary: 设置创作者认证
  /creator/v1/certification/check:
    get:
      tags:
        - creator
      parameters:
        - name: creator_name
          schema:
            type: string
          in: query
        - name: domain_name
          schema:
            type: string
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckValidResponse'
          description: ok
      operationId: checkCertifyCreatorInfoValid
      summary: 检验创作者认证信息是否合法
  /creator/v1/query:
    get:
      tags:
        - creator
      parameters:
        - name: domain_name
          schema:
            type: string
          in: query
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'
          description: ok
      operationId: getCertifiedCreatorInfoByDomainName
      summary: 通过创作者域名获取创作者信息
  '/apkg/v1/package/{package_uuid}/media_mapping':
    get:
      tags:
        - Apkg
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiMediaMappingResponse'
          description: 成功返回
      security:
        - {}
      operationId: apkgGetPackageMediaMapping
      summary: 获得一个资源包的所有媒体文件映射
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  /apkg_creator_tag/v1/package:
    get:
      tags:
        - Apkg
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgTagResponse'
          description: 返回用户的tag列表
      operationId: getCreatorTagGetAllPackage
      summary: 获取用户所有的标签
      description: ''
  '/apkg_creator_tag/v1/package/{package_uuid}/tag':
    post:
      requestBody:
        description: 新配置
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangeApkgTagRequest'
        required: true
      tags:
        - Apkg
      parameters:
        - name: package_uuid
          description: 被修改的package_uuid
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          description: ''
      operationId: changeApkgTags
      summary: 修改apkg的tag标签
  '/apkg/v1/package/{package_uuid}/rename':
    post:
      requestBody:
        description: 新名称
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestChangePackageName'
            example:
              new_name: some text
        required: true
      tags:
        - Apkg
      parameters:
        - name: package_uuid
          description: 卡包uuid
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          description: ''
      operationId: changeApkgpPackageName
      summary: 修改卡包名称
  '/apkg/v1/package/{package_uuid}/media_list':
    get:
      tags:
        - Apkg
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiMediaList'
          description: 成功返回
      security:
        - {}
      operationId: apkgGetPackageMediaList
      summary: '获得一个资源包的所有媒体文件列表，包括sha1, size等'
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  /auth/v1/my_info:
    get:
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'
          description: 成功获得用户信息
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
          description: 需要登录
      security:
        - jwt: []
      operationId: authGetMyInfo
      summary: 获得当前用户信息
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMyInfoRequest'
        required: true
      responses:
        '200':
          description: |
            ok
      operationId: updateMyInfo
      summary: 修改个人信息
  /auth/v1/generate/download_token:
    get:
      tags:
        - Auth
      responses:
        '200':
          content:
            application/json:
              schema:
                title: TokenResponse
                type: object
                properties:
                  token:
                    type: string
          description: ''
      operationId: getAuth
      summary: 获取用户下载的token，`/order/v1/creator/my/download`会用到
  /weixin/v1/mp/create_js_api_signature:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WeixinJsApiSignatureRequest'
        required: true
      tags:
        - Weixin
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeixinJsApiSignatureResponse'
          description: 签名成功
      operationId: mpCreateJsApiSignature
  '/campaign/v1/202104/item/{item_id}/preorder':
    get:
      tags:
        - Campaign
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign202104StatusResponse'
          description: 获取预约、预购状态成功
      security:
        - jwt: []
      operationId: campaign202104GetStatus
      summary: 获取预约、预购状态
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Campaign202104OrderReqeust'
            examples:
              发起预约:
                value:
                  action: BOOK
                  openId: XXXX
              发起支付:
                value:
                  action: PLACE_ORDER
                  openId: XXXX
        required: true
      tags:
        - Campaign
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign202104StatusResponse'
          description: 请求之后，更新的状态
      operationId: campaign202104Post
      summary: 发起预约或者预购请求
    parameters:
      - name: item_id
        schema:
          type: string
        in: path
        required: true
  /payment/v1/pingpp/callback:
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: string
        required: true
      tags:
        - Payment
      responses:
        '200':
          description: OK
      operationId: pingPPCallback
      summary: Ping++支付回调
  /weixin/v1/mp/code_authorize:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WeixinMpCodeRequest'
        required: true
      tags:
        - Weixin
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeixinMpCodeResponse'
          description: 成功
      operationId: mpCodeAuthorize
      summary: 公众号授权，获得openId/UnionId或者其它信息
  /weixin/v1/mp/callback:
    get:
      tags:
        - Weixin
      parameters:
        - name: signature
          description: ''
          schema:
            type: string
          in: query
        - name: timestamp
          description: ''
          schema:
            type: string
          in: query
        - name: nonce
          description: ''
          schema:
            type: string
          in: query
        - name: echostr
          description: ''
          schema:
            type: string
          in: query
        - name: r
          description: 跳转链接，如果链接里有 `__CODE__` 字符串，且query param中有`code`字段，则把code值代入
          schema:
            type: string
          in: query
        - name: code
          description: 如果是oauth授权回调，则会有code
          schema:
            type: string
          in: query
      responses:
        '200':
          description: OK
      operationId: mpCallback
      summary: 公众号回调页面
  /user/v1/wallet:
    get:
      tags:
        - Wallet
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserWalletResponse'
          description: 获取当前账户余额
      operationId: getMyWallet
  /sre/v1/browse/file:
    get:
      parameters:
        - name: path
          description: 当前路径名
          schema:
            type: string
          in: query
          required: false
      responses:
        '200':
          description: 文件属性列表（html）或下载文件
      operationId: listFiles
      summary: 获取目录
      description: 获取服务器环境目录
  /sre/v1/dump/thread:
    get:
      responses:
        '200':
          description: thread dump的文件
      operationId: downloadDump
      summary: 获取服务的thread dump信息
      description: 对应的指令是'jstack -l'会试图保存所有的线程相关信息
  /user/v1/wallet/deposit/skus:
    get:
      tags:
        - Wallet
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WalletSkuItem'
          description: 返回可用的充值列表
      operationId: depositSkuList
      summary: 获取可用的充值列表
  /user/v1/wallet/deposit/buy:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepositWalletRequest'
        required: true
      tags:
        - Wallet
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DepositWalletResponse'
          description: 返回订单号相关信息
      operationId: depositWalletBalance
      summary: 钱包充值
  '/user/v1/basic_info/{user_id}':
    get:
      tags:
        - User
      parameters:
        - name: user_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'
          description: 获取用户基本信息
      operationId: getUserBasicInfo
    parameters:
      - name: user_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /manage/user/v1/query:
    get:
      tags:
        - ManageUser
      parameters:
        - name: phone_number
          description: ''
          schema:
            type: string
          in: query
          required: false
        - name: user_id
          description: ''
          schema:
            format: int64
            type: integer
          in: query
          required: false
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'
          description: ok
      operationId: queryUserInfoByManager
      summary: 管理员查询用户信息
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - ManageUser
      parameters:
        - name: phone_number
          description: ''
          schema:
            type: string
          in: query
          required: false
        - name: nickname
          description: ''
          schema:
            type: string
          in: query
          required: false
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageUserInfo'
          description: ok
      operationId: queryPageUserInfoByManager
      summary: 管理员分页模糊查询用户信息
  /user/v1/cancellation:
    delete:
      tags:
        - User
      responses:
        '200':
          description: ok
      operationId: cancelUser
      summary: 注销账号
      description: 注销当前账号的API（JWT或X-FAKE-USER），请小心测试，会在数据库软删除user（标为deleted），注意prod&QA共用相同的JWT，不要误操作prod！
  /payment/v1/apple/callback:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckPaymentRequest'
        required: true
      tags:
        - Payment
      responses:
        '200':
          description: 检查订单的支付结果，如果支付成功开始分发货物
      operationId: applePayCallback
      summary: 检查苹果支付结果，并且发放商品
  /order/v1/creator/my/:
    description: ''
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - Order
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageOrderInfo'
          description: ok
      operationId: queryPageOrderInfo
      summary: 获取创作者用户的订单信息
      description: |-
        order_status:
            DELIVERED,PAID : 已支付
            CREATED: 未付款
  '/order/v1/{order_id}/refund':
    summary: 执行退款操作
    description: 目前仅允许管理员进行退款，之后可以允许用户自行退款
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
      tags:
        - Order
      parameters:
        - name: order_id
          description: ''
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
          description: 退款成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'
          description: 退款失败，可能是订单超过7天不可退款，或是苹果渠道等不能走我们的退款
      operationId: postOrderRefund
  /order/v1/creator/my/download/excel:
    get:
      tags:
        - Order
      parameters:
        - name: token
          description: '`/auth/v1/generate/download_token` 生成的token'
          schema:
            type: string
          in: query
      responses:
        '200':
          description: ''
      operationId: orderDownLoadExcel
      summary: 下载用户的订单数据，导出为excel
  '/order/v1/{order_id}/query':
    get:
      tags:
        - Order
      parameters:
        - name: order_id
          description: ''
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailVO'
          description: ok
      operationId: getOrderDetail
      summary: 获取订单详情
  '/order/v1/book/{library_book_id}/query':
    get:
      tags:
        - Order
      parameters:
        - name: library_book_id
          description: ''
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailVO'
          description: ok
      operationId: getMyDeliveredOrderByBookId
      summary: 获取用户某本书状态为delivered的订单详情
      description: 用于图书订单分享，不能作为购买依据，因为此订单有可能被退款
  /order/v1/marketing/my:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
      tags:
        - Order
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageOrderMarketingInfo'
          description: ok
      operationId: queryPageOrderMarketingInfo
      summary: 分页查询用户营销订单信息
  /app/v1/versions/latest:
    get:
      tags:
        - Versions
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LatestAppVersionResponse'
          description: ok
      operationId: getLatestVersion
      summary: 获取最新版本信息
  /app/v1/search:
    get:
      parameters:
        - name: q
          description: ''
          schema:
            type: string
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppSearchResponse'
          description: ok
      operationId: search
      summary: APP 首页搜索
  /app/v1/info:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppInfoResponse'
          description: ok
      operationId: getAppInfo
      summary: 获取APP信息
  '/apkg/v1/package/{package_uuid}/info':
    get:
      tags:
        - Apkg
      parameters:
        - name: package_uuid
          schema:
            type: string
          in: path
          required: true
        - name: raw_template
          schema:
            type: boolean
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiPackageVo'
          description: OK
      security:
        - jwt: []
      operationId: apkgGetPackageInfo
      summary: 获得某个apkg的基本信息（模板、卡册等）
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/cards/bulk':
    post:
      requestBody:
        description: 当query传入`?compress=1`时，会以`text/plain`返回，以utf-8编码序列化json（客户端应将二进制反序列化为object再进行处理），这样的好处可以被阿里云压缩。
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApkgCardBulkGetRequest'
          application/octect-stream:
            schema:
              $ref: '#/components/schemas/ApkgCardBulkGetRequest'
        required: true
      tags:
        - Apkg
      parameters:
        - name: package_uuid
          schema:
            type: string
          in: path
          required: true
        - name: compress
          schema:
            type: integer
          in: query
          required: false
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgCardBulkGetResponse'
          description: OK
      security:
        - jwt: []
      operationId: apkgBulkGetCards
      summary: 批量获得cards
  /books/v1/library:
    get:
      parameters:
        - name: page_number
          description: ''
          schema:
            type: integer
          in: query
        - name: page_size
          description: page_size
          schema:
            type: integer
          in: query
        - name: category
          description: ''
          schema:
            type: string
          in: query
        - name: user_id
          description: ''
          schema:
            format: int64
            type: integer
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageLibraryBook'
          description: 返回图书列表
      operationId: findLibraryBooks
      summary: 分页获取图书馆
  /books/v1/my:
    get:
      parameters:
        - name: page_number
          description: ''
          schema:
            type: integer
          in: query
        - name: page_size
          description: page_size
          schema:
            type: integer
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageLibraryBook'
          description: |
            ok
      operationId: findMyPaidBooks
      summary: 获取我购买的所有图书
  '/books/v1/library/info/{library_book_id}':
    get:
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLibraryBookInfo'
          description: ok
      operationId: getLibraryInfo
      summary: 获取图书的详细信息
  '/books/v1/library/lease/{library_book_id}':
    get:
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LibraryBookLeaseResponse'
          description: 返回图书价格
      operationId: getLibraryBookSku
      summary: 获取当前图书的租约以及价格
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
          description: 返回订单单号
      operationId: makeLibraryBookLease
      summary: 租借图书
  '/books/v1/library/lease/{library_book_id}/withplan':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
          description: 返回订单单号
      operationId: makeLibraryBookLeaseWithAiPlan
      summary: 根据AI推荐来制定图书
  '/books/v1/library/report/{library_book_id}':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LibraryBookReportRequest'
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: |
            ok
      operationId: reportBook
      summary: 举报图书
  '/payment/v1/orders/{order_id}':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentRequest'
        required: true
      parameters:
        - name: order_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: 返回支付凭据
      operationId: createTransactionForOrder
      summary: 创建为"购买订单"创建”支付凭据“
  /scheduler/v1/next_card_list:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NextCardListRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NextCardListResponse'
          description: ''
      operationId: getNextCardList
      description: 'Return next card id list for user from deck, scheduled by CardScheduler. Currently, the size of card id list could be either 1 (if there EXISTS card that could be learned/reviewed today) or 0 (if NO cards could be learned/reviewed today).'
  /scheduler/v1/rate_card:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RateCardRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: rateCard
      description: Called when user click card rating buttons. Will affect future card schedule.
  /scheduler/v1/init_default_user_config:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitDefaultUserConfigRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: initDefaultUserConfig
      description: 'Init default user-level config for card schedule, should be called when user registered.'
  /scheduler/v1/init_default_package_and_deck_config:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitDefaultPackageAndDeckConfigRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: initDefaultPackageAndDeckConfig
      description: 'Init default package-level & deck-level config for card schedule of specific user, should be called when user own the package.'
  /scheduler/v1/init_default_deck_and_card_dynamic_schedule:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitDefaultDeckAndCardDynamicScheduleRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: initDefaultDeckAndCardDynamicSchedule
      description: 'Init default deck-level & card-level dynamic schedule data of specific user, should be called before user''s first time learning of package.'
  /scheduler/v1/clear_scheduler_and_study_stat:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClearSchedulerAndStudyStatRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: clearSchedulerAndStudyStat
      description: 'Clear scheduler & study stat data in DB, with choices of different level.'
  /scheduler/v1/record_study_audit_log_start_time:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecordStudyAuditLogStartTimeRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: recordStudyAuditLogStartTime
      description: Record study audit log start time.
  /scheduler/v1/get_study_count_today:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudyCountTodayRequest'
      tags:
        - scheduler
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudyCountTodayResponse'
          description: ok
      operationId: getStudyCountToday
      description: Get study count today.
  /scheduler/v1/get_today_study_finished_related_data:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TodayStudyFinishedRelatedDataRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodayStudyFinishedRelatedDataResponse'
          description: ''
      operationId: getTodayStudyFinishedRelatedData
      summary: 今日学习完成相关数据
  /scheduler/v1/add_extra_cards_today:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddExtraCardsTodayRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: addExtraCardsToday
      description: Add extra cards today.
  /scheduler/v1/suspend_card:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SuspendCardRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: suspendCard
      description: suspend card.
  /scheduler/v1/unsuspend_card:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnsuspendCardRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: OK
      operationId: unsuspendCard
      description: unsuspend card.
  /scheduler/v1/get_all_suspended_cards:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAllSuspendedCardsRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAllSuspendedCardsResponse'
          description: ''
      operationId: getAllSuspendedCards
      description: Get all suspended cards.
  /scheduler/v1/undo_rate_card:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UndoRateCardRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UndoRateCardResponse'
          description: ''
      operationId: undoRateCard
      description: Undo rate card.
  /scheduler/v1/fixed_cards_count_limit:
    get:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FixedCardsCountLimitRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FixedCardsCountLimitResponse'
          description: ''
      operationId: getFixedCardsCountLimit
      description: 获取用户每日新学/复习卡片限额的自定义配置
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FixedCardsCountLimitRequest'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: ok
      operationId: setFixedCardsCountLimit
      description: 用户自定义配置每日新学/复习卡片限额，如果配置了自定义限额， 则不允许调用 addExtraCardsToday 等扩展当日卡片限额的函数，而是继续调用本接口来提高限额。
  /studyplan/v1/decks/lock:
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LockedDecksVO'
        required: true
      tags:
        - scheduler
      responses:
        '200':
          description: ok
      operationId: setDecksLockedStatus
      description: 设置指定deck的锁定状态
    get:
      tags:
        - scheduler
      parameters:
        - name: root_deck_id
          description: ''
          schema:
            format: int64
            type: integer
          in: query
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LockedDecksVO'
          description: ok
      operationId: getAllLockedDecks
      summary: 获取用户所有上锁的decks
  /studystat/v1/get_forgetting_curve_dots_data:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgettingCurveDotsDataRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForgettingCurveDotsDataResponse'
          description: ''
      operationId: getForgettingCurveDotsData
      summary: 遗忘曲线数据点
  /studystat/v1/my:
    get:
      parameters:
        - name: start_date
          description: ''
          schema:
            format: int64
            type: integer
          in: query
          required: true
        - name: end_date
          description: ''
          schema:
            format: int64
            type: integer
          in: query
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudyStat'
          description: |
            ok
      operationId: getMyStudyStat
      summary: 获取我的学习计划统计数据
  /apkg/v1/package:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UploadAnkiPackageRequest'
      tags:
        - Apkg
      responses:
        '200':
          description: OK
      operationId: uploadAnkiPackage
      summary: 上传anki卡包到数据库
  /apkg/v1/my:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StudyStat'
          description: |
            ok
      operationId: getMyApkg
      summary: 获取用户制作的卡包
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UploadAnkiPackageRequest'
      tags:
        - Apkg
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiPackageVo'
          description: |
            ok
      operationId: createLiteApkg
      summary: 上传anki卡包到数据库
  '/apkg/v1/my/{package_uuid}':
    delete:
      parameters:
        - name: package_uuid
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          description: |
            ok
      operationId: deleteMyApkg
      summary: 删除我的卡包
  /log/v1/spans:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserTraceSpan'
        required: true
      responses:
        '200':
          description: OK
      operationId: postUserSpan
      summary: 追踪用户行为数据
  /library/v1/category:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLibraryCategoryResponse'
          description: |
            ok
      operationId: getLibraryCategoryList
      summary: 获取图书馆分类列表
  /library/v1/category/tree:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLibraryCategoryResponse'
          description: |
            ok
      operationId: getLibraryCategoryTree
      summary: 获取图书馆分类列表的树形结构
  '/user/v1/preference/{key}':
    get:
      parameters:
        - name: key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPreference'
          description: OK
      operationId: getUserPreference
      summary: 获取用户偏好设置
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserPreference'
        required: true
      parameters:
        - name: key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          description: OK
      operationId: setUserPreference
      summary: 设置用户偏好
  /books/v1/library/lease:
    get:
      parameters:
        - name: resourceId
          description: ''
          schema:
            format: int64
            type: integer
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLibraryLeaseListResponse'
          description: ok
      operationId: getAllMyLease
      summary: 获取我的所有租借订单
      description: 默认返回二十个，返回最旧的 resourceId ，可以继续前翻
  /coupon/v1/my:
    get:
      parameters:
        - name: library_book_id
          description: ''
          schema:
            format: int64
            type: integer
          in: query
        - name: order_id
          description: ''
          schema:
            format: int64
            type: integer
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserCouponListResponse'
          description: |
            ok
      operationId: getMyCouponList
      summary: 获取我的所有优惠券
  /quote/v1/random:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuoteResponse'
          description: ok
      operationId: randomQuote
      summary: 随机获得一句警世名言
  '/studyplan/v1/decks/{deckId}':
    get:
      parameters:
        - name: deckId
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudyPlanParam'
          description: ok
      operationId: getDeckStudyPlan
      summary: 获取学习计划
  '/studyplan/v1/decks/{deckId}/extend':
    get:
      parameters:
        - name: deckId
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetDaysExtensionCountResponse'
          description: ok
      operationId: getExtendDaysCount
      summary: 获取续期天数
  /studyplan/v1/update_study_plan:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateStudyPlanRequest'
        required: true
      responses:
        '200':
          description: ok
      operationId: updateStudyPlan
      summary: 更新学习计划
  /studyplan/v1/reset_study_plan:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateStudyPlanRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
          description: ok
      operationId: resetStudyPlan
      summary: 清空并重置学习计划
  /studyplan/v1/extend_study_plan:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExtendStudyPlanRequest'
        required: true
      responses:
        '200':
          description: ok
      operationId: extendStudyPlan
      summary: 延期学习计划（但是不更新每天学习卡数）
  /studyplan/v1/get_study_plan:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetStudyPlanRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetStudyPlanResponse'
          description: ok
      operationId: getStudyPlan
      summary: （新版）获取学习计划
  /ugc/v1/books:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UgcBook'
          description: ok
      operationId: listMyCreateBook
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteUgcBookRequest'
        required: false
      responses:
        '200': {}
      security:
        - jwt: []
      operationId: deleteMyBooks
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUgcBookRequest'
        required: true
      responses:
        '200':
          description: ok
      operationId: addUgcBook
  '/ugc/v1/books/{ugcBookId}/review':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewUgcBookRequest'
        required: true
      parameters:
        - name: ugcBookId
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: |
            ok
      operationId: reviewUgcBook
    parameters:
      - name: ugcBookId
        in: path
        required: true
  '/ugc/v1/books/{ugc_book_id}/rank':
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RankUgcBookRequest'
        required: true
      parameters:
        - name: ugc_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: rankUgcBook
      summary: 管理员修改ugc图书的排序参考和推荐
  /logging/v1/log:
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                level:
                  enum:
                    - info
                    - warning
                    - error
                  type: string
                message:
                  type: string
                source:
                  type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
              example:
                spanId: aaabbbcceef
          description: ok
      operationId: loggingAddLog
      summary: 添加一条日志（会打印到ES中）
  '/apkg/v1/package/{package_uuid}/models':
    summary: Path used to manage the list of AnkiModelVos.
    description: 'The REST endpoint/path used to list and create zero or more `AnkiModelVo` entities.  This path contains a `GET` and `POST` operation to perform the list and create tasks, respectively.'
    get:
      tags:
        - ApkgEdit
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnkiModelVo'
          description: Successful response - returns an array of `AnkiModelVo` entities.
      operationId: getAnkiModelVos
      summary: List All AnkiModelVos
      description: Gets a list of all `AnkiModelVo` entities.
    post:
      requestBody:
        description: A new `AnkiModelVo` to be created.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiModelVo'
        required: true
      tags:
        - ApkgEdit
      responses:
        '201':
          description: Successful response.
      operationId: createAnkiModelVo
      summary: Create a AnkiModelVo
      description: Creates a new instance of a `AnkiModelVo`.
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/models/{apkg_model_id}':
    summary: Path used to manage a single AnkiModelVo.
    description: 'The REST endpoint/path used to get, update, and delete single instances of an `AnkiModelVo`.  This path contains `GET`, `PUT`, and `DELETE` operations used to perform the get, update, and delete tasks, respectively.'
    put:
      requestBody:
        description: Updated `AnkiModelVo` information.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiModelVo'
        required: true
      tags:
        - ApkgEdit
      responses:
        '202':
          description: Successful response.
      operationId: updateAnkiModelVo
      summary: Update a AnkiModelVo
      description: Updates an existing `AnkiModelVo`.
    delete:
      tags:
        - ApkgEdit
      responses:
        '204':
          description: Successful response.
      operationId: deleteAnkiModelVo
      summary: Delete a AnkiModelVo
      description: Deletes an existing `AnkiModelVo`.
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: apkg_model_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/models/{model_id}/notes':
    summary: Path used to manage the list of ankinotevos.
    description: 'The REST endpoint/path used to list and create zero or more `AnkiNoteVo` entities.  This path contains a `GET` and `POST` operation to perform the list and create tasks, respectively.'
    get:
      tags:
        - ApkgEdit
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnkiNoteVo'
          description: Successful response - returns an array of `AnkiNoteVo` entities.
      operationId: getAnkiNoteVos
      summary: List All AnkiNoteVos
      description: Gets a list of all `AnkiNoteVo` entities.
    post:
      requestBody:
        description: A new `AnkiNoteVo` to be created.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiNoteVo'
        required: true
      tags:
        - ApkgEdit
      responses:
        '201':
          description: Successful response.
      operationId: createAnkiNoteVo
      summary: Create a AnkiNoteVo
      description: Creates a new instance of a `AnkiNoteVo`.
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: model_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/models/{model_id}/notes/{anki_note_id}':
    summary: Path used to manage a single AnkiNoteVo.
    description: 'The REST endpoint/path used to get, update, and delete single instances of an `AnkiNoteVo`.  This path contains `GET`, `PUT`, and `DELETE` operations used to perform the get, update, and delete tasks, respectively.'
    put:
      requestBody:
        description: Updated `AnkiNoteVo` information.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiNoteVo'
        required: true
      tags:
        - ApkgEdit
      responses:
        '202':
          description: Successful response.
      operationId: updateAnkiNoteVo
      summary: Update a AnkiNoteVo
      description: Updates an existing `AnkiNoteVo`.
    delete:
      tags:
        - ApkgEdit
      responses:
        '204':
          description: Successful response.
      operationId: deleteAnkiNoteVo
      summary: Delete a AnkiNoteVo
      description: Deletes an existing `AnkiNoteVo`.
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: model_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
      - name: anki_note_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/media':
    post:
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  format: binary
                  type: string
      tags:
        - ApkgEdit
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
      operationId: apkgUploadMedia
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/batch_mutate_job':
    summary: 静态资源 ApkgBatchMutateJob CRUD API
    description: '文档：https://qianmojiaoyu.feishu.cn/docs/doccntSrQHLSMVlRN6C4b4v0EEb#K0q2XM'
    get:
      tags:
        - ApkgBatchMutate
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgBatchMutateJobStatus'
          description: Successful response.
        '404':
          description: 没有历史上的job
      operationId: getApkgBatchMutateJob
      summary: 获得该package uuid的最后一个mutate job
      description: 如果没有则返回404。如果有，则总是返回最新的那个。
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApkgBatchMutateJob'
        required: true
      tags:
        - ApkgBatchMutate
      parameters:
        - name: run_now
          description: 如果是管理员，且为true，可以同步地执行变更。有助于测试和实时修改数据
          schema:
            type: boolean
          in: query
          required: false
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgBatchMutateJobStatus'
          description: Successful response.
      operationId: createApkgBatchMutateJob
      summary: '给该package uuid创建一个新的mutate job, 没有变化的类型（如model）或者操作（如delete），可以置为null，后端可以接受。'
      description: 只允许历史上没有job，或者前一个job处于cancelled 或 mutate_finished 才可以创建新的。如果前一个处于under_review，可以先取消（删除）这个，再创建新的。
    delete:
      tags:
        - ApkgBatchMutate
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgBatchMutateJobStatus'
          description: Successful response.
      operationId: deleteApkgBatchMutateJob
      summary: delete ApkgBatchMutateJob
      description: 删除或取消一个mutate job。只允许在 under_review 的job被取消。
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/batch_mutate_job/detail':
    summary: 静态资源 ApkgBatchMutateJob CRUD API
    description: '文档：https://qianmojiaoyu.feishu.cn/docs/doccntSrQHLSMVlRN6C4b4v0EEb#K0q2XM'
    get:
      tags:
        - ApkgBatchMutate
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgBatchMutateJob'
          description: Successful response.
        '404':
          description: 没有历史上的job
      operationId: getApkgBatchMutateJobDetail
      summary: （仅管理员可见）获得该 mutate job 的详细信息，用于审核
      description: 如果没有则返回404。如果有，则总是返回最新的那个。
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/batch_mutate_job/review':
    summary: 人工审核某一个job
    description: '文档：https://qianmojiaoyu.feishu.cn/docs/doccntSrQHLSMVlRN6C4b4v0EEb#K0q2XM'
    post:
      requestBody:
        content:
          application/json:
            schema:
              title: ReviewApkgBatchMutateJobRequest
              type: object
              properties:
                isRejected:
                  required: true
                  type: boolean
                rejectComment:
                  required: false
                  type: string
        required: true
      tags:
        - ApkgBatchMutate
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgBatchMutateJobStatus'
          description: Successful response.
      operationId: reviewApkgBatchMutateJob
      summary: 发送审核意见
      description: ''
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/decks':
    summary: Path used to manage the list of ankideckvos.
    description: 'The REST endpoint/path used to list and create zero or more `AnkiDeckVo` entities.  This path contains a `GET` and `POST` operation to perform the list and create tasks, respectively.'
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnkiDeckVo'
          description: Successful response - returns an array of `AnkiDeckVo` entities.
      operationId: getAnkiDeckVos
      summary: List All AnkiDeckVos
      description: Gets a list of all `AnkiDeckVo` entities.
    post:
      requestBody:
        description: A new `AnkiDeckVo` to be created.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiDeckVo'
        required: true
      responses:
        '201':
          description: Successful response.
      operationId: createAnkiDeckVo
      summary: Create a AnkiDeckVo
      description: Creates a new instance of a `AnkiDeckVo`.
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/decks/{deck_id}':
    summary: Path used to manage a single AnkiDeckVo.
    description: 'The REST endpoint/path used to get, update, and delete single instances of an `AnkiDeckVo`.  This path contains `GET`, `PUT`, and `DELETE` operations used to perform the get, update, and delete tasks, respectively.'
    put:
      requestBody:
        description: Updated `AnkiDeckVo` information.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiDeckVo'
        required: true
      responses:
        '202':
          description: Successful response.
      operationId: updateAnkiDeckVo
      summary: Update a AnkiDeckVo
      description: Updates an existing `AnkiDeckVo`.
    delete:
      responses:
        '204':
          description: Successful response.
      operationId: deleteAnkiDeckVo
      summary: Delete a AnkiDeckVo
      description: Deletes an existing `AnkiDeckVo`.
    parameters:
      - name: package_uuid
        description: A unique identifier for a `AnkiDeckVo`.
        schema:
          type: string
        in: path
        required: true
      - name: deck_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg_lite/v1/package/{package_uuid}/decks/{deck_id}/bulk_add_notes':
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/AnkiNoteVo'
        required: true
      tags:
        - ApkgLite
      operationId: apkgLiteBulkAddNotes
      summary: '批量添加notes, 会自动帮忙创建cards'
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: deck_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg_lite/v1/package/{package_uuid}/decks/{deck_id}/bulk_delete_notes':
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                format: int64
                type: integer
        required: true
      tags:
        - ApkgLite
      operationId: apkgLiteBulkDeleteNotes
      summary: 批量删除卡片，输入note id list
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: deck_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/models/{model_id}/templates':
    summary: Path used to manage the list of ankitemplatevos.
    description: 'The REST endpoint/path used to list and create zero or more `AnkiTemplateVo` entities.  This path contains a `GET` and `POST` operation to perform the list and create tasks, respectively.'
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnkiTemplateVo'
          description: Successful response - returns an array of `AnkiTemplateVo` entities.
      operationId: getAnkiTemplateVos
      summary: List All AnkiTemplateVos
      description: Gets a list of all `AnkiTemplateVo` entities.
    post:
      requestBody:
        description: A new `AnkiTemplateVo` to be created.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiTemplateVo'
        required: true
      responses:
        '201':
          description: Successful response.
      operationId: createAnkiTemplateVo
      summary: Create a AnkiTemplateVo
      description: Creates a new instance of a `AnkiTemplateVo`.
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: model_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/models/{model_id}/templates/{template_id}':
    summary: Path used to manage a single AnkiTemplateVo.
    description: 'The REST endpoint/path used to get, update, and delete single instances of an `AnkiTemplateVo`. This path contains `GET`, `PUT`, and `DELETE` operations used to perform the get, update, and delete tasks, respectively.'
    put:
      requestBody:
        description: Updated `AnkiTemplateVo` information.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiTemplateVo'
        required: true
      responses:
        '202':
          description: Successful response.
      operationId: updateAnkiTemplateVo
      summary: Update a AnkiTemplateVo
      description: Updates an existing `AnkiTemplateVo`.
    delete:
      responses:
        '204':
          description: Successful response.
      operationId: deleteAnkiTemplateVo
      summary: Delete a AnkiTemplateVo
      description: Deletes an existing `AnkiTemplateVo`.
    parameters:
      - name: package_uuid
        description: A unique identifier for a `AnkiTemplateVo`.
        schema:
          type: string
        in: path
        required: true
      - name: model_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
      - name: template_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /apkg_import/v1/excel:
    post:
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                excel1:
                  format: binary
                  type: string
                metadata1:
                  format: binary
                  type: string
      tags:
        - ApkgImport
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiPackageVo'
      operationId: apkgImportExcel
      summary: 上传excel并导入
  /ugc/v1/books/page:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryUgcBookRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageUgcBook'
          description: 分页查询创作者卡册
      operationId: listPageMyCreateBook
  '/apkg/v1/package/{anki_package_id}':
    get:
      parameters:
        - name: anki_package_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiPackageResponse'
      security:
        - jwt: []
      operationId: apkgGetPackage
      summary: 获得package上传的基本信息
      description: 根据ankiPackageId获得ankiPackage信息
    parameters:
      - name: anki_package_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/card_preview_images':
    get:
      tags:
        - ApkgPreviewImage
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
          description: 返回图片URL列表
      operationId: apkgGetCardPreviewImages
      summary: '返回缓存的卡片预览图, 用于ugc book的挑选'
    delete:
      tags:
        - ApkgPreviewImage
      parameters:
        - name: package_uuid
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
      operationId: clearApkgPreviewImages
      summary: 清空缓存的卡片预览图
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/card_preview_images/generate':
    post:
      tags:
        - ApkgPreviewImage
      parameters:
        - name: package_uuid
          schema:
            type: string
          in: path
          required: true
        - name: count
          schema:
            format: int64
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
      operationId: generateApkgPreviewImages
      summary: 生成缓存的卡片预览图
    parameters:
      - name: package_uuid
        schema:
          type: string
        in: path
        required: true
  '/apkg/v1/package/{package_uuid}/cards/search':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - Apkg
      parameters:
        - name: package_uuid
          schema:
            type: string
          in: path
          required: true
        - name: keyword
          schema:
            type: string
          in: query
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchPageCardsVO'
          description: 根据关键词查找卡包中所有的notes
      operationId: searchPageCardsByKeyword
  '/usercard/v1/package/{anki_package_uuid}/cards/{card_id}/star':
    post:
      tags:
        - usercard
      responses:
        '200':
          description: ok
      operationId: starCard
      summary: 给卡片标星
    delete:
      tags:
        - usercard
      responses:
        '200':
          description: ok
      operationId: unstarCard
      summary: 取消卡片标星
    parameters:
      - name: anki_package_uuid
        schema:
          type: string
        in: path
        required: true
      - name: card_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/ugc/v1/books/{ugc_book_id}':
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UgcBook'
      security:
        - jwt: []
      operationId: getUgcBookInfo
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUgcBookRequest'
      responses:
        '200': {}
      security:
        - jwt: []
      operationId: updateUgcBook
      summary: 编辑ugcBook
    parameters:
      - name: ugc_book_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /apkg/v1/package/page:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryAnkiPackageRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageAnkiPackage'
      security:
        - jwt: []
      operationId: pageAnkiPackageList
      summary: 分页获取ankiPackage
  /redeem/v1/generate:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRedeemRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateRedeemResponse'
      operationId: generateRedeem
      summary: 生成随机码
      description: 生成兑换码接口
  /redeem/v1/generation_log/list/page:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRedeemGenerationLogRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageRedeemGenerationLog'
      security:
        - jwt: []
      operationId: listRedeemGenerateLogPage
  /redeem/v1/list/page:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRedeemRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageRedeem'
      security:
        - jwt: []
      operationId: listRedeemPage
  /redeem/v1/consume_log/list/page/:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRedeemConsumeLogRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PageRedeemConsumeLog'
      security:
        - jwt: []
      operationId: listRedeemConsumeLogPage
  /redeem/v1/consume:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConsumeRedeemCodeRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConsumeRedeemCodeResponse'
      security:
        - jwt: []
      operationId: consumeRedeemCode
  /user/v1/preference/review/list:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserPreferenceVO'
      operationId: listPreferenceReview
  '/user/v1/preference/review/{id}':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserPreference'
      parameters:
        - name: id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200': {}
      operationId: updatePreferenceValue
  /feedback/v1/report:
    description: 提交反馈
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedbackUpdateVO'
        required: true
      tags:
        - feedback
      responses:
        '200':
          description: ok
      operationId: reportFeedback
  '/feedback/v1/query/creator/{status}':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - feedback
      parameters:
        - name: status
          description: read代表仅查询已读，unread代表仅查询未读，all代表查询全部
          schema:
            enum:
              - read
              - unread
              - all
            type: string
          in: path
          required: true
        - name: content
          description: 反馈内容
          schema:
            type: string
          in: query
        - name: report_user_nickname
          description: 反馈用户的名称
          schema:
            type: string
          in: query
        - name: library_book_title
          description: 反馈图书的标题
          schema:
            type: string
          in: query
        - name: type
          description: 反馈类型 包括 内容纠错，感谢作者
          schema:
            type: string
          in: query
        - name: filter_shown
          description: 是否过滤出展示给用的的数据 true只列出 展示给用户的数据 false 不列出展示给用户的数据
          schema:
            type: boolean
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageFeedbackResponseVO'
          description: ok
      operationId: queryPageCreatorFeedback
      summary: 创作者查询自己图书的反馈
      description: "管理员，或者看APP使用反馈时，不要用这个接口\r\n创作者使用“内容纠错”时，设置type=内容纠错；可选参数：report_user_nickname，library_book_title，content\r\n创作者使用“感谢作者”时，设置type=感谢作者；可选参数：library_book_title，filter_shown"
  '/feedback/v1/query/admin/{status}':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - feedback
      parameters:
        - name: status
          description: read代表仅查询已读，unread代表仅查询未读，all代表查询全部
          schema:
            enum:
              - read
              - unread
              - all
            type: string
          in: path
          required: true
        - name: content
          description: 反馈内容
          schema:
            type: string
          in: query
        - name: report_user_nickname
          description: 反馈用户的名称
          schema:
            type: string
          in: query
        - name: library_book_title
          description: 反馈图书的标题
          schema:
            type: string
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageFeedbackResponseVO'
          description: ok
      operationId: queryPageAllFeedback
      summary: 查询所有反馈（管理员）
  '/feedback/v1/read/{feedback_id}':
    put:
      tags:
        - feedback
      parameters:
        - name: feedback_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: readFeedback
      description: 某个反馈状态设为已读
  /statistics/v1/learner_and_order:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatisticsRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                type: string
          description: ''
      operationId: getLearnerAndOrderStatistics
      description: |
        ```
        新学习者 new_learner_statistics,
        活跃学习者 active_learner_statistics,
        学习完成率 complete_rate_statistics,
        累计学习者 accumulate_learner_statistics,
        平均学习时间 avg_learn_time_statistics,
        平均学习卡片数 avg_learn_card_statistics,
        每日订单金额 order_amount_statistics,
        累计订单金额 order_amount_accumulate_statistics,
        每日订单数量 order_count_statistics,
        累计订单数量 order_count_accumulate_statistics;
        ```
  '/icp/v1/templates/{template_id}/cards/{card_id}/unlock':
    description: 解锁单词卡片
    post:
      parameters:
        - name: template_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
        - name: card_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: |
            ok
      operationId: unlockSingleCard
      summary: 解锁单张卡片
  /campaign202111/v1/gild:
    description: 获取当前的金箔数量
    get:
      tags:
        - campaign202111
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GildConsumeResponse'
          description: 消耗金箔之后会返回全局已使用的金箔数量，用户剩余的金箔数量和用户已经使用过的金箔数量
      operationId: getGildCount
      summary: 获取当前的金箔数量
  /campaign202111/v1/gild/consume:
    description: 消耗金箔给菩萨镀金
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                count:
                  type: integer
        required: true
      tags:
        - campaign202111
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GildConsumeResponse'
          description: 消耗金箔之后会返回全局已使用的金箔数量，用户剩余的金箔数量和用户已经使用过的金箔数量
      operationId: consumeGild
      summary: 消耗金箔给菩萨镀金
  '/icp/v1/templates/{template_id}':
    get:
      parameters:
        - name: template_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserTemplateIcpInfo'
          description: ok
      operationId: getIcpInfoByTemplateId
      summary: 获取当前用户对于这个模板的付款信息
  '/icp/v1/templates/{template_id}/unlock':
    post:
      parameters:
        - name: template_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
          description: ok
      operationId: unlockTemplateIcp
      summary: 请求解锁该卡包模板
  '/flag/v1/app/{key}':
    get:
      tags:
        - flag
      parameters:
        - name: key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeneralEntityFlagResponse'
          description: ok
      operationId: findAppConfigFlag
      summary: 查询APP配置的flag
  '/flag/v1/{entity_type}/{entity_id}/{key}':
    get:
      tags:
        - flag
      parameters:
        - name: entity_type
          schema:
            type: string
          in: path
          required: true
        - name: entity_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
        - name: key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeneralEntityFlagResponse'
          description: ok
      operationId: findGeneralEntityFlag
      summary: 查询通用实体flag
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GeneralEntityFlagRequest'
      tags:
        - flag
      parameters:
        - name: entity_type
          schema:
            type: string
          in: path
          required: true
        - name: entity_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
        - name: key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: setGeneralEntityFlag
      summary: 设置通用实体flag
    delete:
      tags:
        - flag
      parameters:
        - name: entity_type
          schema:
            type: string
          in: path
          required: true
        - name: entity_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
        - name: key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: removeGeneralEntityFlag
      summary: 删除通用实体flag
  '/cardcomment/v1/{card_id}':
    get:
      tags:
        - cardcomment
      parameters:
        - name: card_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardCommentResponse'
          description: ok
      operationId: queryCommentByCardId
      summary: 查询卡片的评论
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardCommentRequest'
      tags:
        - cardcomment
      parameters:
        - name: card_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: editCardComment
      summary: 修改评论
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardCommentRequest'
      tags:
        - cardcomment
      parameters:
        - name: card_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: createCardComment
      summary: 创建新评论
  '/cardcomment/v1/query/{anki_package_uuid}':
    get:
      tags:
        - cardcomment
      parameters:
        - name: anki_package_uuid
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardCommentResponse'
          description: ok
      operationId: queryCommentByPackageUuid
      summary: 查询卡册的所有评论
  /event/v1/search_click_event:
    description: 搜索点击事件api
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchClickEventRequest'
      responses:
        '200': {}
      operationId: sendSearchClickEvent
  '/groupbuy/v1/book/{library_book_id}/config':
    description: 配置拼团快照
    get:
      tags:
        - groupbuy
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupBuyConfigSnapshotVO'
          description: ok
      security:
        - {}
      operationId: getGroupBuyConfigSnapshot
      summary: 获取图书的拼团快照
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupBuyConfigSnapshotVO'
        required: true
      tags:
        - groupbuy
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          description: ok
      operationId: createGroupBuyConfigSnapshot
      summary: 创建图书的拼团快照
  /apkg_shared_template/v1/tags:
    get:
      tags:
        - apkg_shared_template
      responses:
        '200':
          description: 返回标签列表
          content:
            application/json:
              schema:
                type: object
                description: 返回tag列表
                title: tagList
                properties:
                  tags:
                    type: array
                    items:
                      type: string
              examples: {}
      operationId: getSharedTemplateTags
      summary: 获得共享模板的所有tags
  /apkg_shared_template/v1/templates/search:
    get:
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnkiSharedTemplateVO'
      operationId: getPublicTemplates
      summary: 获取公开的templates
  /apkg_shared_template/v1/template:
    put:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              title: updateSharedInfo
              properties:
                is_public:
                  type: boolean
                tags:
                  type: string
                template_id:
                  type: integer
                  format: int64
      responses:
        '200':
          description: ''
          content:
            application/json: {}
      operationId: changeTemplate
      summary: 修改共享template 仅限于tags和ispublic属性
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SharedTemplateRequest'
        required: true
      responses:
        '200':
          content:
            application/json: {}
          description: ''
      operationId: addSharedTemplate
      summary: 添加新的共享template
  '/groupbuy/v1/group/book/{library_book_id}/initiate':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupBuyOrderRequest'
      tags:
        - groupbuy
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
          description: ok
      operationId: initiateGroupBuy
      summary: 发起拼团
  '/groupbuy/v1/group/{group_buy_instance_id}/join':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupBuyOrderRequest'
      tags:
        - groupbuy
      parameters:
        - name: group_buy_instance_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
          description: ok
      operationId: joinGroupBuy
      summary: 参与拼团
  '/groupbuy/v1/group/{group_buy_instance_id}/query':
    get:
      tags:
        - groupbuy
      parameters:
        - name: group_buy_instance_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupBuyInstanceVO'
          description: ok
      operationId: getGroupBuyInfo
      summary: 获取拼团信息
  '/groupbuy/v1/book/{library_book_id}/query':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - groupbuy
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageGroupBuyInstanceVO'
          description: ok
      operationId: queryPageGroupBuyInfoByBookId
      summary: 分页获取图书的所有拼团
  /groupbuy/v1/group/my:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryPageRequest'
        required: true
      tags:
        - groupbuy
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: query
          required: false
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageGroupBuyInstanceVO'
          description: ok
      operationId: queryPageMyGroupBuyInfo
      summary: 分页获取用户参与的所有拼团
  '/short_link/v1/{short_link_key}':
    get:
      tags:
        - short_link
      parameters:
        - name: short_link_key
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShortLinkVO'
      operationId: getShortLinkByKey
      summary: 由 short_link_key 获得 ShortLinkVO
    parameters:
      - name: short_link_key
        schema:
          type: string
        in: path
        required: true
  /short_link/v1/create:
    post:
      requestBody:
        content:
          application/json:
            schema:
              title: CreateShortLinkRequest
              type: object
              properties:
                object_id:
                  description: 订单id或者其它id
                  required: true
                  type: string
                actual_link:
                  description: 实际链接，可以是json字符串，格式见下面的example。为了方便向前兼容，phoneNumber为空字符串，orderId为long类型
                  required: true
                  type: string
            example:
              object_id: 这里写转成string类型的订单号
              actual_link: '{"phoneNumber":"","orderId": 订单号long类型}'
      tags:
        - short_link
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShortLinkVO'
          description: ''
      operationId: createShortLink
      summary: 创建一个对象的短链
  '/groupbuy/v1/group/{group_buy_instance_id}/complete':
    description: 手动完成某个团购
    post:
      parameters:
        - name: group_buy_instance_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json: {}
          description: ''
      operationId: completeGroupBuyByInstanceId
    parameters:
      - name: group_buy_instance_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /groupbuy/v1/group/page:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryGroupBuyRequest'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageGroupBuyInstanceVO'
          description: ''
      operationId: listPageGroupBuyInstance
  '/letter/v1/namepace/{namespace}/broadcast/create':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLetterRequest'
        required: true
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LetterResponse'
          description: ''
      operationId: createBroadcastLetter
      summary: 用户创建祈愿信息（breadcast版本）
    parameters:
      - name: namespace
        description: 表明事件类型
        schema:
          type: string
        in: path
        required: true
  '/letter/v1/namepace/{namespace}/broadcast/{broadcast_letter_id}':
    get:
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LetterInfoResponse'
          description: ''
      operationId: getBroadcastLetter
      summary: 用户根据broadcastId获取祈愿信息的内容
    parameters:
      - name: namespace
        schema:
          type: string
        in: path
        required: true
      - name: broadcast_letter_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/letter/v1/namepace/{namespace}/broadcast/{broadcast_letter_id}/instantiate':
    description: 实例化这个信件，即接受这封信，变成自己的instance
    post:
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json:
              schema:
                format: int64
                type: integer
          description: 实例化成功的话会返回创建好的instance的Id
      operationId: instantiateLetter
      summary: 实例化祈愿信息，即接受这封信，变成自己的instance
    parameters:
      - name: namespace
        schema:
          type: string
        in: path
        required: true
      - name: broadcast_letter_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/letter/v1/namepace/{namespace}/instance/{instance_letter_id}':
    description: |
      （从分享链接中获取letter id，得到详情，不强制要求登录）
      如果letter_id 下面是private，则要求登录 （否则返回401）
    get:
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LetterInfoResponse'
          description: ''
      operationId: getInstanceLetter
      summary: 获取祈愿信息（instance）详情包括评论等等
    parameters:
      - name: namespace
        description: 标明不同活动的性质：本次是benidiction
        schema:
          type: string
        in: path
        required: true
      - name: instance_letter_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/letter/v1/{broadcast_letter_id}':
    description: 删除，需要校验当前用户id与创建祈福信息id是否相同
    delete:
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json: {}
          description: ''
      operationId: deleteBroadcastLetter
      summary: 删除祈愿信息（broadcast版本）
    parameters:
      - name: broadcast_letter_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/letter/v1/namepace/{namespace}/instance/filter_type/{filter_type}/list':
    description: 获取活动首页祈愿信息，建议前端获取顺序优先级：我发出的》我收到的》其他
    get:
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LetterBriefInfo'
          description: 返回祈福letter列表
      operationId: getLetterList
      summary: 获取全局祈愿信息概况
    parameters:
      - name: namespace
        schema:
          type: string
        in: path
        required: true
      - name: filter_type
        schema:
          type: string
        in: path
        required: true
      - name: filter_type
        schema:
          type: string
      - name: page_number
        description: ''
        schema:
          type: integer
        in: query
        required: true
      - name: page_size
        description: ''
        schema:
          type: integer
        in: query
        required: true
  '/letter/v1/namepace/{namespace}/instance/{instance_letter_id}/comment':
    description: 创建评论
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLetterCommentRequest'
        required: true
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json:
              schema:
                format: int64
                type: integer
          description: 如果创建成功的话会返回comment的id
      operationId: createComment
      summary: 创建评论
    parameters:
      - name: namespace
        schema:
          type: string
        in: path
        required: true
      - name: instance_letter_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/letter/v1/comment/{comment_id}':
    description: （删除评论，仅发送者可以删除）校验当前userid与评论创建者的userid是否相同，相同则删除
    delete:
      tags:
        - Letter
      responses:
        '200':
          content:
            application/json: {}
          description: ''
      operationId: deleteComment
      summary: 删除评论
    parameters:
      - name: comment_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/usercard/v1/package/{anki_package_uuid}/query':
    description: 标星，评论，最近学习，已掌握等卡片数据。
    get:
      parameters:
        - name: anki_package_uuid
          schema:
            type: string
          in: path
          required: true
        - name: type
          description: 'type值: STAR 标星, COMMENT 评论, RECENT_LEARNING 最近学习, MASTERED 已掌握, LEARNING 学习中, NEW 未学习, SUSPENDED 已隐藏'
          schema:
            type: string
          in: query
          required: true
        - name: page_number
          description: ''
          schema:
            type: integer
          in: query
          required: true
        - name: page_size
          description: ''
          schema:
            type: integer
          in: query
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageUserCardInfo'
      operationId: listUserCardInfoPage
      description: ''
    parameters:
      - name: anki_package_uuid
        schema:
          type: string
        in: path
        required: true
  '/usercard/v1/comment/{card_id}':
    get:
      parameters:
        - name: card_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardCommentResponse'
      operationId: getUserCardComment
      description: 根据cardId获得用户评论
    parameters:
      - name: card_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /user_withdrawal/v1/withdrawal/list/page:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryWithdrawalApplicationRequest'
      tags:
        - UserWithdrawal
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageWithdrawalApplicationVO'
      operationId: listWithdrawalApplicationPage
      summary: 查看提现明细列表
  /user_withdrawal/v1/income_detail/list/page:
    summary: 用户收入明细（支持创作者钱包和分享者）
    get:
      tags:
        - UserWithdrawal
      parameters:
        - name: page_number
          description: ''
          schema:
            type: integer
          in: query
        - name: page_size
          description: ''
          schema:
            type: integer
          in: query
        - name: withdrawal_wallet_type
          description: MARKETING_WALLET/CREATOR_WALLET
          schema:
            type: string
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageIncomeDetailVO'
      operationId: listIncomeDetailPage
      summary: 收入明细列表
  '/user_withdrawal/v1/income_detail/{order_id}':
    get:
      tags:
        - UserWithdrawal
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncomeDetailVO'
      operationId: getIncomeDetail
      summary: 查看收入明细
    parameters:
      - name: order_id
        schema:
          type: string
        in: path
        required: true
  /user_withdrawal/v1/withdrawal_wallet:
    get:
      tags:
        - UserWithdrawal
      parameters:
        - name: wallet_type
          description: 'CREATOR_WALLET, MARKETING_WALLET'
          schema:
            type: string
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WithdrawalWalletVO'
      operationId: getWithdrawalWallet
      summary: 查看用户钱包余额
      description: 查看用户钱包，包括创作者和非创作者的钱包
  /user_withdrawal/v1/withdrawal/apply:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WithdrawalApplicationRequest'
      tags:
        - UserWithdrawal
      responses:
        '200': {}
      operationId: applyWithdrawal
      summary: 申请提现
  /user_withdrawal/v1/binding:
    get:
      tags:
        - UserWithdrawal
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PayBindingInfoVO'
      operationId: getPayBindingInfo
      summary: 查看账号绑定状态
  '/user_withdrawal/v1/binding/unbind/{type}':
    post:
      tags:
        - UserWithdrawal
      parameters:
        - name: type
          description: ALIPAY/WECHAT
          schema:
            type: string
          in: path
          required: true
      responses:
        '200': {}
      operationId: unbindPay
      summary: 解绑提现账号
    parameters:
      - name: type
        schema:
          type: string
        in: path
        required: true
  '/user_withdrawal/v1/withdrawal/review/{requests_id}':
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewWithdrawalRequest'
      tags:
        - UserWithdrawal
      parameters:
        - name: requests_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
      responses:
        '200': {}
      operationId: reviewWithdrawalRequests
      summary: 审核提现
    parameters:
      - name: requests_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /user_withdrawal/v1/binding/alipay/bind:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserPayBindRequest'
      tags:
        - UserWithdrawal
      responses:
        '200': {}
      operationId: bindAlipayUser
      summary: 绑定支付宝账号为提现账号
  /alipay/v1/bind/callback:
    get:
      tags:
        - Alipay
      responses:
        '200': {}
      operationId: bindCallback
      summary: 绑定支付宝回调接口
  /alipay/v1/bind/app/auth:
    get:
      tags:
        - Alipay
      responses:
        '200':
          content:
            application/json:
              schema:
                type: string
      operationId: grantAuth
      summary: 提供给app的授权码
  /alipay/v1/bind/callback_url:
    get:
      tags:
        - Alipay
      responses:
        '200':
          content:
            application/json:
              schema:
                type: string
          description: 回调地址
      operationId: generateCallbackUrl
      summary: 生成回调地址
  /user_withdrawal/v1/calculate_requesting_amount:
    get:
      tags:
        - UserWithdrawal
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelRequestingAmount'
          description: 返回支付宝和微信待发放金额
      operationId: calculateRequestingAmount
      summary: 统计待发放金额
  /user_withdrawal/v1/requests/available_times:
    get:
      tags:
        - UserWithdrawal
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WithdrawalRequestInfo'
          description: 返回剩余可提现次数
      operationId: getAvailableRequestTimes
      summary: 查询剩余可提现次数
  '/content_machine_review/v1/{objectId}/{objectType}':
    get:
      tags:
        - Review
      parameters:
        - name: objectId
          schema:
            format: int64
            type: integer
          in: path
          required: true
        - name: objectType
          description: 'UGC_BOOK,USER_INFO'
          schema:
            type: string
          in: path
          required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContentMachineReviewResultVO'
          description: |-
            返回数据格式
            {
             "stats": {
               "block_num": 3,
               "warning_num": 43
             },
             "fields": [
               {"path": "book/title", "result": {"level": "warning", "label": ["politic"], raw: "<阿里云返回的原始数据>"}},
               {"path": "anki/note/$noteId", "result": {"level": "warning", "label": ["politic"], raw: ""}},
               {"path": "anki/note/$noteId", "result": {"level": "warning", "label": ["politic"], raw: ""}},
               {"path": "anki/template/$tmplId/back-front", "result": {"level": "block", "label": ["politic"], raw: ""}}
             ]
            }
      operationId: getReviewResult
      summary: 获得机器审核结果
    parameters:
      - name: objectId
        schema:
          format: int64
          type: integer
        in: path
        required: true
      - name: objectType
        description: 'UGC_BOOK,USER_INFO'
        schema:
          type: string
        in: path
        required: true
  /user_withdrawal/v1/merchant_account:
    get:
      tags:
        - UserWithdrawal
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantAccountVO'
          description: ''
      operationId: getMerchantAccount
      summary: 获取商家账户余额
  '/feedback/v1/public/library_book/{library_book_id}':
    get:
      tags:
        - feedback
      parameters:
        - name: library_book_id
          schema:
            format: int64
            type: integer
          in: path
          required: true
        - name: page_number
          description: 页码
          schema:
            type: integer
          in: query
        - name: page_size
          description: 页面数据量
          schema:
            type: integer
          in: query
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageFeedbackResponseVO'
          description: 查看某本图书的用户感谢列表
      operationId: listFeedBackThanksAuthor
      summary: 查看某本图书的用户感谢列表
    parameters:
      - name: library_book_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  '/feedback/v1/feedback/{feedback_id}':
    put:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedbackUpdateVO'
      tags:
        - feedback
      responses:
        '200':
          content:
            application/json: {}
      operationId: updateFeedbackInfo
      summary: 修改feedback(包括修改展示或者不展示)
    parameters:
      - name: feedback_id
        schema:
          format: int64
          type: integer
        in: path
        required: true
  /marketing/v1/banner/app_config:
    get:
      tags:
        - banner
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BannerConfigVO'
      operationId: getAppBannerConfig
      summary: 获得banner图
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BannerConfigRequest'
      tags:
        - banner
      responses:
        '200':
          content:
            application/json: {}
      operationId: configureAppBanner
      summary: 配置app banner图
  /campaign202111/v1/achievement/list:
    get:
      tags:
        - campaign202111
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AchievementVO'
      operationId: listAchievements
      summary: 获得成就列表（用于任务列表）
  /campaign202111/v1/pray_page:
    get:
      tags:
        - campaign202111
      responses:
        '200': {}
      operationId: openPrayPage
      summary: 打开祈福页面，本API不做任何操作，只用于记录事件
  /campaign202111/v1/order/donation:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDonationOrderRequest'
      tags:
        - campaign202111
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateDonationOrderResponse'
      operationId: createCampaign202111Order
      summary: 创建活动捐款订单
  /compensation202111/v1/amount:
    summary: compensation202111
    get:
      tags:
        - compensation202111
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Compensation202111OrderVO'
      operationId: getDifferentAmount
      summary: 获取差值
      description: 获取差值
  /compensation202111/v1/download/excel:
    get:
      tags:
        - compensation202111
      parameters:
        - name: token
          description: ''
          schema:
            type: string
          in: query
      responses:
        '200': {}
      deprecated: false
      operationId: downloadExcel
      summary: 导出差额订单excel
      description: 导出差额订单excel
  /tts/v1/audio:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TTSRequest'
      tag:
        - tts
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TTSResponse'
      operationId: getAudioFilePath
      summary: 获取文本对应的音频 OSS 路径
      description: 获取文本对应的音频 OSS 路径
  /anki/v1/review/:
    get:
      summary: Your GET endpoint
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApkgCardBulkGetRequest'
      operationId: reviewAnki
      description: 测试函数
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnkiDeckVo'
    put:
      summary: ''
      operationId: put-anki-v1-review
      responses:
        '200':
          description: OK
components:
  schemas:
    AuthTokenResponse:
      title: Root Type for AuthTokenResponse
      description: 登录成功的响应体
      required:
        - expire_date
        - token
      type: object
      properties:
        token:
          type: string
        expire_date:
          format: date-time
          type: string
      example:
        token: eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJlMTM3Y2E0OC0xYmFhLTQ3MjctODgxNC0xMmY1Y2NkYzM4ZDMiLCJpc3MiOiJodHRwOi8vZXhhbXBsZS5vcmciLCJhdWQiOiJodHRwOi8vZXhhbXBsZS5vcmciLCJzdWIiOiJhZG1pbiIsImlhdCI6MTYxNTQ3MzQ3NSwiZXhwIjoxNjE1NDc3MDc1LCJhdXRob3JpdGllcyI6WyJBRE1JTiIsIlVTRVIiXSwicmVmcmVzaENvdW50IjowLCJyZWZyZXNoTGltaXQiOjF9.GfF6EBzaaDRPFno_ij40ic9kmYTcJEYqJO7CCij3tiI
        expire_date: '2020-03-01T00:00:00Z'
    ErrorResponse:
      title: Root Type for ErrorResponse
      description: 通用的错误返回
      required:
        - message
        - errorCode
        - domain
        - params
      type: object
      properties:
        errorCode:
          format: int32
          description: 业务上会将所有错误码定义好。可以用它作为翻译
          type: integer
        message:
          description: 往往是内部错误信息或者英文提示，不建议直接显示给用户
          type: string
        params:
          description: 一个string to string map，用于显示错误的额外信息，本字段一般情况下没有内容
          type: object
        domain:
          description: 指明该错误的所属领域。不同domain下error code可以重复，见各domain的error code定义
          type: string
      example:
        domain: auth
        errorCode: 40023
        message: XX is invalid
        params:
          xx: yy
    OneStepLoginRequest:
      title: Root Type for OneStepLoginRequest
      type: object
      properties:
        access_token:
          description: 阿里云一键登录 SDK 获取到的 AccessToken
          type: string
    SignInPhoneRequest:
      title: Root Type for SignInRequest
      description: 登录请求
      required:
        - method_name
        - code
      type: object
      properties:
        method_name:
          description: 指定手机登录的方式：`sms_code`为短信验证码；`onekey_aliyun`为阿里云SDK一键登录；
          enum:
            - sms_code
            - aliyun_onekey
          type: string
        country_code:
          description: 国家代码，中国为86。使用短信验证码时要求输入，使用一键登录时无需输入。
          type: integer
        phone_number:
          description: 手机号。使用短信验证码时要求输入，使用一键登录时无需输入。
          type: string
        apple_open_id:
          description: 苹果的OpenId。可选
          type: string
        bind_token:
          description: 绑定第三方登录的凭证。可选
          type: string
        code:
          description: 验证码，或一键登录的token
          type: string
        open_id:
          description: QQ或微信的open_id
          type: string
        third_party_channel:
          description: WeChat | QQ
          type: string
      example:
        method_name: sms_code
        country_code: 86
        phone_number: '15779784953'
        apple_open_id: some text
        bind_token: some text
        code: some text
        open_id: some text
        third_party_channel: WeChat | QQ
    SignInPhoneResponse:
      title: Root Type for SignInResponse
      description: 登录成功的响应
      required:
        - country_code
        - phone_number
      type: object
      allOf:
        - type: object
        - $ref: '#/components/schemas/AuthTokenResponse'
      properties:
        country_code:
          description: 回显的手机号的国家码
          type: integer
        phone_number:
          description: 回显的手机号（手机一键登录场景最需要）
          type: string
      example:
        token: eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJlMTM3Y2E0OC0xYmFhLTQ3MjctODgxNC0xMmY1Y2NkYzM4ZDMiLCJpc3MiOiJodHRwOi8vZXhhbXBsZS5vcmciLCJhdWQiOiJodHRwOi8vZXhhbXBsZS5vcmciLCJzdWIiOiJhZG1pbiIsImlhdCI6MTYxNTQ3MzQ3NSwiZXhwIjoxNjE1NDc3MDc1LCJhdXRob3JpdGllcyI6WyJBRE1JTiIsIlVTRVIiXSwicmVmcmVzaENvdW50IjowLCJyZWZyZXNoTGltaXQiOjF9.GfF6EBzaaDRPFno_ij40ic9kmYTcJEYqJO7CCij3tiI
        expired_date: '2020-03-01T00:00:00Z'
        country_code: 86
        phone_number: '13300000000'
    RefreshTokenResponse:
      description: 刷新token响应
      type: object
      properties:
        token:
          required: true
          type: string
    SendSmsCodeRequest:
      title: Root Type for SendSmsCodeRequest
      description: 发送短信验证码的请求体
      required:
        - captcha
        - phone_number
        - purpose
      type: object
      properties:
        purpose:
          description: 发送短信的目的
          enum:
            - SIGNIN
          type: string
        country_code:
          format: int32
          description: 手机号的国家码，中国为86
          type: integer
        phone_number:
          description: 手机号码
          type: string
        captcha:
          description: |
            图形或者滑块验证码所生成的信息。目前支持多种验证方式：
            * 对于NVC（无感验证），直接传入NVCVal即可，是一个字符串。
            * 对于IC（智能验证），需要以这样的格式传入：IC::{"token":"...", "sig": "...", "sessionId": "..."}
            * 对于AJ（滑块验证），需要以AJ::的前缀传入：AJ::{"token":"...", "captchaType": "...", "pointJson": "...}
            * 对于QA环境，可以直接传入 "QA", 即可通过验证（方便回归测试）
          type: string
      example:
        purpose: SIGNIN
        country_code: 86
        phone_number: '13300000000'
        captcha: '21314'
    CommonResponse:
      title: Root Type for CommonResponse
      description: 往往是用来表示200成功的响应体
      required:
        - message
      type: object
      properties:
        message:
          type: string
      example:
        message: ok
    AnkiMediaFileInfo:
      title: Root Type for AnkiMediaFileInfo
      description: 一个media文件的信息
      required:
        - filename
        - size
      type: object
      properties:
        size:
          format: int32
          type: integer
        filename:
          type: string
      example:
        size: 10000
        filename: xxxxxx.mp3
    AnkiMediaMappingResponse:
      title: Root Type for AnkiMediaMappingResponse
      description: 卡册静态资源的映射信息
      required:
        - base_url
      type: object
      properties:
        base_url:
          type: string
      example:
        base_url: 'https://media-qa.qmcdn.net/apkg/media/3322-3d8def/'
    AnkiMediaList:
      title: 卡册静态资源列表
      description: ''
      type: object
      properties:
        files:
          required: true
          type: array
          items:
            title: AnkiMediaInfo
            type: object
            properties:
              file_name:
                title: 文件名
                type: string
              size:
                format: int32
                title: 文件大小
                type: integer
              sha1_sum:
                title: 文件的 sha1 值
                type: string
      example:
        files:
          - file_name: 1.png
            size: 100
            sha1_sum: 0ed1d870a1978049ef30e5e633e8003e9e3c9e62
    CaptchaActionResponse:
      title: Root Type for CaptchResponse
      description: 阿里云人机验证的结果，同时附加业务请求结果
      type: object
      properties:
        bizCode:
          format: int32
          type: integer
      example:
        bizCode: 100
    BadgeResponse:
      title: Root Type for BadgeResponse
      description: ''
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        image_url:
          type: string
      example:
        image_url: 'https://www.baidu.com/xxx'
        title: ''
        description: ''
    UserInfo:
      title: Root Type for UserInfo
      description: 用户基本信息
      type: object
      properties:
        user_id:
          format: int64
          type: integer
        nickname:
          type: string
        image_url:
          type: string
        phone_number_e164:
          description: ''
          type: string
        locatoin:
          description: ''
          type: string
        birthday:
          format: date
          description: ''
          type: string
        gender:
          description: ''
          type: string
        is_bind_apple:
          description: ''
          type: boolean
        is_bind_wechat:
          description: ''
          type: boolean
        is_bind_qq:
          description: ''
          type: boolean
        is_edu_verified:
          description: ''
          type: boolean
        badge_list:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/BadgeResponse'
        banner_url:
          description: 创作者主页banner
          type: string
        profile:
          description: 个人简介
          type: string
      example:
        nickname: some text
        image_url: some text
        phone_number_e164: some text
        locatoin: some text
        birthday: '2018-01-17'
        gender: some text
        is_bind_apple: true
        is_bind_wechat: true
        is_bind_qq: true
        is_edu_verified: true
    PageUserInfo:
      description: 分页查询用户订单信息
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/UserInfo'
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    WeixinJsApiSignatureRequest:
      title: Root Type for WeixinJsApiSignatureRequest
      description: ''
      type: object
      properties:
        url:
          type: string
      example:
        url: 'https://www.baidu.com/xxx'
    WeixinJsApiSignatureResponse:
      title: Root Type for WeixinJsApiSignatureResponse
      description: ''
      type: object
      properties:
        appId:
          type: string
        timestamp:
          format: int64
          type: integer
        nonceStr:
          type: string
        signature:
          type: string
      example:
        appId: wx729d86d68b8dfb6f
        timestamp: 1600000000
        nonceStr: d9292e19e192912e
        signature: 292d929e2d292d223
    Campaign202104StatusResponse:
      title: Root Type for Campaign202104StatusResponse
      description: ''
      required:
        - status
      type: object
      properties:
        status:
          enum:
            - NOT_BOOKED
            - BOOKED
            - ORDERED_NOT_PAID
            - ORDERED_PAID
          type: string
        charge:
          description: 如果这个响应包含这个字段，则应该调用JSAPI或者Ping++SDK进行支付请求
          type: string
      example:
        status: NOT_BOOKED
        charge: '{xxxx.....xxxx}'
    Campaign202104OrderReqeust:
      title: Root Type for Campaign202104OrderReqeust
      description: ''
      required:
        - action
      type: object
      properties:
        action:
          enum:
            - BOOK
            - PLACE_ORDER
          type: string
        openId:
          type: string
      example:
        action: PLACE_ORDER
        openId: xxxxx-yyy-zzz
    WeixinMpCodeRequest:
      title: Root Type for WeixinMpCodeRequest
      description: 公众号网页授权登录的请求
      required:
        - scope
      type: object
      properties:
        code:
          description: 回调得到的code
          type: string
        scope:
          description: '向微信请求授权的scope，详见 https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html#1'
          enum:
            - snsapi_base
            - snsapi_userinfo
          type: string
      example:
        code: 12312dsddinv
        scope: snsapi_base
    WeixinMpCodeResponse:
      title: Root Type for WeixinMpCodeResponse
      description: ''
      type: object
      properties:
        openId:
          type: string
      example:
        openId: dsafsdfsdf
    UserWalletResponse:
      title: Root Type for UserWalletResponse
      description: 分为单位
      type: object
      properties:
        ios_balance:
          format: int32
          type: integer
        android_balance:
          format: int32
          type: integer
      example:
        ios_balance: 100
        android_balance: 200
    DepositWalletRequest:
      title: Root Type for DepositWalletRequest
      description: ''
      type: object
      properties:
        sku_id:
          type: string
      example:
        sku_id: add_wallet_balance_ios_1
    DepositWalletResponse:
      title: Root Type for DepositWalletResponse
      description: ''
      type: object
      properties:
        order_no:
          type: string
      example:
        order_no: xxx
    WalletSkuItem:
      title: Root Type for WalletSkuItem
      description: ''
      type: object
      properties:
        amount:
          format: int32
          type: integer
        description:
          type: string
        sku_id:
          type: string
        delta:
          format: int32
          type: integer
      example:
        amount: 1000
        description: 10R=10虾滑
        delta: 1000
        sku_id: add_wallet_balance_ios_2
    CheckPaymentRequest:
      title: Root Type for CheckPaymentRequest
      description: ''
      type: object
      properties:
        order_no:
          type: string
        transaction_receipt:
          type: string
      example:
        order_no: '1'
        transaction_receipt: xx
    LatestAppVersionResponse:
      description: ''
      type: object
      properties:
        ios:
          type: object
        android:
          type: object
      example:
        ios:
          version: v1.0.3
          force_version: v1.0.2
          title: 有重大更新
          desc:
            - 更新提示1
            - 更新提示2
          app_id: ''
          download_url: ''
        android:
          version: v1.0.3
          force_version: v1.0.2
          title: 有重大更新
          desc: 更新提示
          channel: ''
          download_url: ''
    PageOrderInfo:
      description: 分页查询用户订单信息
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/OrderInfo'
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    PageOrderMarketingInfo:
      description: 分页查询用户营销订单信息
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/OrderMarketingInfo'
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    OrderMarketingInfo:
      description: 用户营销订单信息
      type: object
      properties:
        purchase_order_marketing_info_id:
          format: int64
          type: integer
        content:
          $ref: '#/components/schemas/OrderDetailVO'
        hua_platform_ratio:
          format: float
          type: number
        marketing_user_id:
          format: int64
          type: integer
        marketing_channel_ratio:
          format: float
          type: number
        group_buy_config_snapshot:
          $ref: '#/components/schemas/GroupBuyConfigSnapshotVO'
        created_date:
          type: string
        last_modified_date:
          type: string
    OrderDetailVO:
      description: 用户订单详情
      type: object
      properties:
        content:
          description: 订单内容详情，包括 group buy instance id
          required: true
          type: string
        order_id:
          format: int64
          type: integer
        status:
          type: string
        sku:
          type: string
    OrderInfo:
      description: 用户订单信息
      type: object
      properties:
        order_id:
          format: int64
          type: integer
        book_title:
          type: string
        order_type:
          type: string
        purchaser:
          type: string
        amount:
          format: int32
          type: integer
        order_status:
          type: string
        purchase_date:
          format: date-time
          type: string
        actual_amount:
          format: int32
          type: integer
        phone_number:
          type: string
      example:
        book_title: 肖秀荣1000题
        order_type: 卡册内付费
        purchaser: 小白
        amount: 10000
        order_status: 已支付
        purchase_date: '2020-03-01T00:00:00Z'
    QueryPageRequest:
      description: '这是通用的分页请求！只建议使用page_number, page_size, start_date, end_date。请勿增加更多的字段了，旧字段将会被淘汰。其它字段请放在query param'
      type: object
      properties:
        page_number:
          format: int64
          description: 当前页码
          type: integer
        page_size:
          description: 当前页码大小
          type: integer
        start_date:
          format: date
          description: 搜索开始时间
          type: string
        end_date:
          format: date
          description: 搜索截至时间
          type: string
        phone_number:
          description: 电话可以用来查询订单
          type: string
        book_title:
          description: 书名可以用来查询订单
          type: string
        query_all_user:
          description: 管理员可以设置为true，则查询所有用户的数据
          type: boolean
    PageLibraryBook:
      title: Root Type for PageLibraryBook
      description: ''
      type: object
      properties:
        content:
          type: array
          items:
            type: object
            properties:
              recommend:
                format: int32
                type: integer
              qm_title:
                type: string
              qm_publisher:
                type: string
              qm_publisher_image_url:
                type: string
              qm_publisher_nickname:
                type: string
              qm_publisher_badge_list:
                description: ''
                type: array
                items:
                  $ref: '#/components/schemas/BadgeResponse'
              qm_cover:
                type: string
              qm_description:
                type: string
              library_book_id:
                format: int64
                type: integer
              origin_book_author:
                type: string
              origin_book_title:
                type: string
              origin_book_cover:
                type: string
              origin_book_description:
                type: string
              category:
                type: string
              expire_date:
                type: string
              package_uuid:
                type: string
              package_editor:
                type: string
              package_proofreader:
                type: string
              copyright:
                type: string
              related_link:
                type: string
              image_url_list:
                description: ''
                type: array
                items:
                  type: string
              card_count:
                format: int32
                type: integer
              borrower_count:
                format: int32
                type: integer
              learned_card_count:
                format: int32
                type: integer
              learned_card_count_today:
                format: int32
                type: integer
              card_to_learn_per_day:
                format: int32
                type: integer
              learn_status:
                type: string
              flags:
                type: object
                additionalProperties:
                  type: string
              study_plan_exist:
                type: boolean
              marketing_channel_return_amount:
                format: int64
                description: （分享返利）如果成功邀请一人，预计获得的收益（单位为分）
                required: true
                type: integer
        hidden_book_id_list:
          type: array
          items:
            format: int64
            type: integer
        pageable:
          type: object
          properties:
            offset:
              format: int32
              type: integer
            page_number:
              format: int32
              type: integer
            page_size:
              format: int32
              type: integer
        total_pages:
          format: int32
          type: integer
        total_elements:
          format: int64
          type: integer
        last:
          type: boolean
        size:
          format: int32
          type: integer
        number:
          format: int32
          type: integer
        number_of_elements:
          format: int32
          type: integer
        first:
          type: boolean
        empty:
          type: boolean
      example:
        content:
          - qm_title: some text
            qm_publisher: some text
            qm_cover: some text
            qm_description: some text
            library_book_id: 30
            origin_book_author: some text
            origin_book_title: some text
            origin_book_cover: some text
            origin_book_description: some text
            category: some text
            expire_date: some text
            package_uuid: some text
            package_editor: some text
            package_proofreader: some text
            copyright: some text
            related_link: some text
            image_url_list:
              - some text
              - some text
          - qm_title: some text
            qm_publisher: some text
            qm_cover: some text
            qm_description: some text
            library_book_id: 8
            origin_book_author: some text
            origin_book_title: some text
            origin_book_cover: some text
            origin_book_description: some text
            category: some text
            expire_date: some text
            package_uuid: some text
            package_editor: some text
            package_proofreader: some text
            copyright: some text
            related_link: some text
            image_url_list:
              - some text
              - some text
        pageable:
          offset: 38
          page_number: 19
          page_size: 51
        total_pages: 62
        total_elements: 95
        last: true
        size: 62
        number: 1
        number_of_elements: 38
        first: true
        empty: true
    CreateOrderRequest:
      title: Root Type for CreateOrderRequest
      description: ''
      type: object
      properties:
        quantity:
          format: int32
          type: integer
        manual_init_study_plan:
          type: boolean
        marketing_user_id:
          format: int64
          description: 分享者Id
          type: integer
      example:
        quantity: 1
    CreateOrderResponse:
      title: Root Type for CreateOrderResponse
      description: ''
      type: object
      properties:
        order_id:
          format: int64
          type: integer
        quantity:
          format: int32
          description: ''
          type: integer
        amount:
          format: int64
          description: 订单总金额 = 内容价格+AI服务费
          required: true
          type: integer
        content_amount:
          format: int64
          description: 内容价格
          required: true
          type: integer
        ai_service_amount:
          format: int64
          description: AI服务费，如果没有则传0
          required: true
          type: integer
      example:
        order_id: 55
        quantity: 63
        amount: 57
    LibraryBookLeaseResponse:
      title: Root Type for LibraryBookLeaseResponse
      description: ''
      type: object
      properties:
        sku:
          type: object
          properties:
            id:
              type: string
            amount:
              format: int32
              type: integer
            price:
              type: object
              properties:
                base_price:
                  format: int64
                  type: integer
                fixed_price:
                  format: int64
                  type: integer
                edge_setting:
                  type: array
                  items:
                    type: object
                    properties:
                      day:
                        format: int32
                        type: integer
                      factor:
                        format: int64
                        type: integer
                      label_text:
                        type: string
                      is_show:
                        type: boolean
        lease:
          type: object
          properties:
            expire_date:
              format: date-time
              type: string
      example:
        sku:
          id: library_book_lease_1
          amount: 1000
        lease:
          expire_date: '2021-04-16 03:20:42'
    CreatePaymentRequest:
      title: Root Type for CreatePaymentRequest
      description: ''
      type: object
      properties:
        order_id:
          format: int64
          type: integer
        transaction_gateway:
          enum:
            - APPLE_PAY
            - PING_PP
            - IOS_WALLET
            - ALIPAY
            - WXPAY
            - ANDROID_WALLET
          type: string
        coupon_id:
          format: int64
          description: ''
          type: integer
        pay_channel:
          type: string
        open_id:
          type: string
        success_callback_url:
          type: string
      example:
        order_id: 7
        transaction_gateway: PING_PP
        pay_channel: alipay|wx
        coupon_id: 13
        open_id: ping++ 的openId
    SignInAppleRequest:
      title: Root Type for SignInAppleRequest
      description: ''
      type: object
      properties:
        identity_token:
          type: string
    SignInQQRequest:
      title: Root Type for SignInQQRequest
      description: ''
      type: object
      properties:
        openid:
          type: string
      example:
        openid: xx
    AnkiNoteVo:
      title: Root Type for AnkiNoteVo
      description: ''
      required:
        - id
      type: object
      properties:
        anki_model_id:
          format: int64
          type: integer
        field_values:
          type: array
          items:
            type: string
        id:
          format: int64
          description: ''
          type: integer
      example:
        id: 123
        anki_model_id: 1231412123
        field_values:
          - '马克思主义理论体系的本质特征是：{{c1::科学性和革命性的统一}}'
          - 科学性和革命性的统一<div>唯物论与辩证法的统一</div><div>理论性与实践性的统一</div><div>阶级性和群众性的统一</div>
          - field33333
    AnkiModelVo:
      title: Root Type for AnkiModelVo
      description: ''
      required:
        - name
        - css
        - fields
        - type
      type: object
      properties:
        id:
          format: int64
          type: integer
        name:
          type: string
        css:
          type: string
        fields:
          type: array
          items:
            type: string
        type:
          enum:
            - standard
            - cloze
          type: string
        ref_anki_model_id:
          type: integer
          format: int64
          description: 引用的modelId
      example:
        id: 1
        name: 单词
        css: 'body:{font-size: 30px;}'
        fields:
          - 单词
          - 音标
          - 释义
          - 发音
          - 例句
          - 例句翻译
          - 拓展
        type: stadard
    AnkiCardVo:
      title: Root Type for AnkiCardVo
      description: ''
      required:
        - id
        - ankiTemplateId
        - ankiDeckId
        - ankiNoteId
      type: object
      properties:
        id:
          format: int64
          type: integer
        note:
          $ref: '#/components/schemas/AnkiNoteVo'
        ankiNoteId:
          format: int64
          type: integer
        ankiDeckId:
          format: int64
          type: integer
        ankiTemplateId:
          format: int64
          type: integer
        clozeOrd:
          description: 所属model为cloze时，该字段才会出现
          required: false
          type: integer
        order:
          format: int32
          description: card在package内部的全局排序，决定了整本书的学习顺序。注意，当deck序发生变化时，也要修改card序
          required: false
          type: integer
      example:
        id: 1000000000
        note:
          id: 123
          anki_model_id: 1231412123
          field_values:
            - '马克思主义理论体系的本质特征是：{{c1::科学性和革命性的统一}}'
            - 科学性和革命性的统一<div>唯物论与辩证法的统一</div><div>理论性与实践性的统一</div><div>阶级性和群众性的统一</div>
            - field33333
        ankiTemplateId: 100000
    AnkiTemplateVo:
      title: Root Type for AnkiTemplateVo
      description: ''
      required:
        - anki_model_id
      type: object
      properties:
        id:
          format: int64
          type: integer
        name:
          type: string
        card_front_format:
          type: string
        card_back_format:
          type: string
        anki_model_id:
          format: int64
          description: ''
          type: integer
        ref_anki_template_id:
          type: integer
          description: 引用的模板id
          format: int64
      example:
        id: 100000000000000
        name: RECITE
        card_front_format: <a href=。。。>这里是正面模板</a>
        card_back_format: 这里是背面的模板
        anki_model_id: 100000
    AnkiPackageVo:
      title: Root Type for AnkiPackageVo
      description: ''
      type: object
      properties:
        createdDate:
          format: date-time
          type: string
        ankiPackageId:
          format: int64
          type: integer
        packageUUID:
          type: string
        packageCardCount:
          format: int32
          type: integer
        packageTitle:
          type: string
        decks:
          type: array
          items:
            $ref: '#/components/schemas/AnkiDeckVo'
        models:
          type: array
          items:
            $ref: '#/components/schemas/AnkiModelVo'
        templates:
          type: array
          items:
            $ref: '#/components/schemas/AnkiTemplateVo'
        status:
          type: string
      example:
        decks: []
        models: []
        templates: []
    ApkgBatchMutateJob:
      title: 批量更新APKG资源的任务
      description: |
        如果更新，请传回相应VO的原来的ID。如果要引用新对象，请使用负数ID.
        文档：
        https://qianmojiaoyu.feishu.cn/docs/doccntSrQHLSMVlRN6C4b4v0EEb#0DveD9
      type: object
      properties:
        card:
          title: BatchMutateCard
          required: true
          type: object
          properties:
            create:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiCardVo'
            update:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiCardVo'
            delete:
              required: true
              type: array
              items:
                format: int64
                type: integer
        note:
          title: BatchMutateNote
          required: true
          type: object
          properties:
            create:
              type: array
              items:
                $ref: '#/components/schemas/AnkiNoteVo'
            update:
              type: array
              items:
                $ref: '#/components/schemas/AnkiNoteVo'
            delete:
              type: array
              items:
                format: int64
                type: integer
        deck:
          title: BatchMutateDeck
          required: true
          type: object
          properties:
            create:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiDeckVo'
            update:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiDeckVo'
            delete:
              required: true
              type: array
              items:
                format: int64
                type: integer
        template:
          title: BatchMutateTemplate
          required: true
          type: object
          properties:
            create:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiTemplateVo'
            update:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiTemplateVo'
            delete:
              required: true
              type: array
              items:
                format: int64
                type: integer
        model:
          title: BatchMutateModel
          required: true
          type: object
          properties:
            create:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiModelVo'
            update:
              required: true
              type: array
              items:
                $ref: '#/components/schemas/AnkiModelVo'
            delete:
              required: true
              type: array
              items:
                format: int64
                type: integer
        preview_json_data:
          title: 用于预览修改后结果的json字符串，前端解析、使用。
          required: false
          type: string
    ApkgBatchMutateJobStatus:
      title: ApkgBatchMutateJob 的 状态
      description: |
        状态说明：under_review审核中；in_mutate_queue准备更新；mutating正在更新；mutate_finished更新完成；cancelled已删除，或已取消；FAILED执行失败
      type: object
      properties:
        id:
          format: int64
          required: true
          type: integer
        status:
          required: true
          enum:
            - UNDER_REVIEW
            - IN_MUTATE_QUEUE
            - MUTATING
            - MUTATE_FINISHED
            - REJECTED
            - CANCELLED
            - FAILED
          type: string
        review_comment:
          required: false
          type: string
    ApkgCardBulkGetRequest:
      title: Root Type for ApkgCardBulkGetRequest
      description: ''
      type: object
      properties:
        card_id_list:
          type: array
          items:
            format: int64
            type: integer
      example:
        card_id_list:
          - 1000
          - 1001
          - 1002
    ApkgCardBulkGetResponse:
      title: Root Type for ApkgCardBulkGetResponse
      description: ''
      type: object
      properties:
        cards:
          type: array
          items:
            $ref: '#/components/schemas/AnkiCardVo'
      example:
        cards: []
    NextCardListRequest:
      title: Root Type for NextCardListRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          description: 根deck id
          required: true
          type: integer
        sub_deck_id:
          format: int64
          description: 子deck id，可以是任意章节，如果为null，则学习整本书
          required: false
          type: integer
      example:
        deck_id: 321
        sub_deck_id: 322
    NextCardListResponse:
      title: Root Type for NextCardListResponse
      description: ''
      type: object
      properties:
        card_id_list:
          description: v1时的card id list，只有card id
          type: array
          items:
            format: int64
            type: integer
        card_list:
          description: v2 (2021.9月) 新增加的card list，包括卡片状态和各按钮的预测间隔
          type: array
          items:
            $ref: '#/components/schemas/AnkiCardStatusVO'
      example:
        card_id_list:
          - 1619257625104
        card_list:
          - id: 1619257625104
            card_type: NEW
            next_study_interval:
              again: 0
              hard: 10
              good: 20
              easy: 30
    AnkiCardStatusVO:
      title: 学习时卡片状态和预测各button增加的interval
      type: object
      properties:
        card_id:
          format: int64
          type: integer
        card_type:
          description: 当前卡片的状态
          enum:
            - NEW
            - LEARN
            - REVIEW
        next_study_interval:
          description: 点击对应按钮时卡片下次学习的间隔（单位为秒）
          type: object
          properties:
            again:
              format: int64
              type: integer
            hard:
              format: int64
              type: integer
            good:
              format: int64
              type: integer
            easy:
              format: int64
              type: integer
    RateCardRequest:
      title: Root Type for RateCardRequest
      description: ''
      type: object
      properties:
        card_id:
          format: int64
          type: integer
        card_rating_button_type:
          description: '4 valid values, AGAIN, HARD, GOOD, EASY.'
          type: string
      example:
        card_id: 1619257434854
        card_rating_button_type: EASY
    InitDefaultUserConfigRequest:
      title: Root Type for InitDefaultUserConfigRequest
      description: ''
      type: object
      properties:
        unused:
          type: integer
    InitDefaultPackageAndDeckConfigRequest:
      title: Root Type for InitDefaultPackageAndDeckConfigRequest
      description: ''
      type: object
      properties:
        package_id:
          format: int64
          type: integer
        study_mode:
          description: '3 valid values, DEFAULT, FREQUENT, CRAM.'
          type: string
      example:
        package_id: 1619257434454
        card_rating_button_type: DEFAULT
    InitDefaultDeckAndCardDynamicScheduleRequest:
      title: Root Type for InitDefaultDeckAndCardDynamicScheduleRequest
      description: ''
      type: object
      properties:
        package_id:
          format: int64
          type: integer
      example:
        package_id: 1619257434054
    ClearSchedulerAndStudyStatRequest:
      title: Root Type for ClearSchedulerAndStudyStatRequest
      description: ''
      type: object
      properties:
        level:
          type: string
        user_id_list:
          type: array
          items:
            format: int64
            type: integer
        deck_id_list:
          type: array
          items:
            format: int64
            type: integer
      example:
        level: USER_AND_DECK_LEVEL
        user_id_list:
          - 1
          - 2
          - 3
        deck_id_list:
          - 200
          - 201
          - 202
    RecordStudyAuditLogStartTimeRequest:
      title: Root Type for RecordStudyAuditLogStartTimeRequest
      description: ''
      type: object
      properties:
        card_id:
          format: int64
          type: integer
      example:
        card_id: 1619257434854
    StudyCountTodayRequest:
      title: Root Type for StudyCountTodayRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
      example:
        deck_id: 1619257434854
    StudyCountTodayResponse:
      title: Root Type for StudyCountTodayResponse
      description: ''
      type: object
      properties:
        study_count_planned_to_finish_today:
          format: int32
          description: 今日计划要学习的总卡片量
          type: integer
        learning_count_today:
          format: int32
          description: 今日处于正在学习中的卡片量
          type: integer
        study_count_today:
          format: int32
          description: 今日已经学会的卡片量
          type: integer
      example:
        study_count_today: 10
        learning_count_today: 20
        study_count_planned_to_finish_today: 40
    TodayStudyFinishedRelatedDataRequest:
      title: Root Type for TodayStudyFinishedRelatedDataRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
      example:
        deck_id: 1619257434854
    TodayStudyFinishedRelatedDataResponse:
      title: Root Type for TodayStudyFinishedRelatedDataResponse
      description: ''
      type: object
      properties:
        total_study_time_taken:
          format: int32
          type: integer
        debut_cards_count_checked_today:
          format: int32
          type: integer
        review_phase_cards_count_checked_today:
          format: int32
          type: integer
        total_study_days_count:
          format: int32
          type: integer
        recommended_extra_cards_count_list:
          type: array
          items:
            format: int32
            type: integer
      example:
        total_study_time_taken: 128000
        debut_cards_count_checked_today: 10
        review_phase_cards_count_checked_today: 20
        total_study_days_count: 80
        recommended_extra_cards_count_list:
          - 10
          - 20
          - 40
    AddExtraCardsTodayRequest:
      title: Root Type for AddExtraCardsTodayRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          description: 根deck id
          required: true
          type: integer
        sub_deck_id:
          format: int64
          description: 子deck id，可以是任意章节，如果为null，则学习整本书
          required: false
          type: integer
        extra_cards_count:
          format: int32
          description: 增加的卡片数，请按推荐值来请求
          required: true
          type: integer
      example:
        deck_id: 1619257434854
        extra_cards_count: 10
    SuspendCardRequest:
      title: Root Type for SuspendCardRequest
      description: ''
      type: object
      properties:
        card_id:
          format: int64
          type: integer
      example:
        card_id: 1619257434854
    UnsuspendCardRequest:
      title: Root Type for UnsuspendCardRequest
      description: ''
      type: object
      properties:
        card_id:
          format: int64
          type: integer
      example:
        card_id: 1619257434854
    GetAllSuspendedCardsRequest:
      title: Root Type for GetAllSuspendedCardsRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
      example:
        deck_id: 1619257434884
    GetAllSuspendedCardsResponse:
      title: Root Type for GetAllSuspendedCardsResponse
      description: ''
      type: object
      properties:
        card_id_list:
          type: array
          items:
            format: int64
            type: integer
      example:
        card_id_list:
          - 1619257625104
    UndoRateCardRequest:
      title: Root Type for UndoRateCardRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
      example:
        deck_id: 1619257434854
    UndoRateCardResponse:
      title: Root Type for UndoRateCardResponse
      description: ''
      type: object
      properties:
        card_id:
          format: int64
          type: integer
      example:
        card_id: 1619257434854
    UpdateStudyPlanRequest:
      title: Root Type for UpdateStudyPlanRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
        study_days_count:
          format: int32
          type: integer
      example:
        deck_id: 1619257434854
        study_days_count: 10
    ExtendStudyPlanRequest:
      title: Root Type for ExtendStudyPlanRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
        study_days_extension_count:
          format: int32
          type: integer
      example:
        deck_id: 1619257434854
        study_days_extension_count: 10
    GetStudyPlanRequest:
      title: Root Type for GetStudyPlanRequest
      description: ''
      type: object
      properties:
        deck_id:
          format: int64
          type: integer
        study_days_count:
          format: int32
          type: integer
      example:
        deck_id: 1619257434854
        study_days_count: 10
    GetStudyPlanResponse:
      title: Root Type for GetStudyPlanResponse
      description: ''
      type: object
      properties:
        cards_count_planned_per_day:
          format: int32
          type: integer
        total_study_days_count:
          format: int32
          type: integer
        study_time_planned_per_day:
          format: int64
          type: integer
      example:
        cards_count_planned_per_day: 20
        total_study_days_count: 10
        study_time_planned_per_day: 128000
    UploadAnkiPackageRequest:
      title: Root Type for UploadAnkiPackageRequest
      description: ''
      type: object
      properties:
        url:
          type: string
        name:
          type: string
      example:
        url: xx
        name: xx
    UserTraceSpan:
      title: Root Type for UserTraceSpan
      description: ''
      type: object
      properties:
        device_fingerprint:
          type: string
        user_token:
          type: string
        event_id:
          type: string
        event_detail:
          type: string
      example:
        device_fingerprint: x
        user_token: x
        event_id: x
        event_detail: x
    UserPreference:
      title: Root Type for UserPreference
      description: ''
      type: object
      properties:
        value:
          type: string
      example:
        value: v
    GetLibraryCategoryResponse:
      title: Root Type for GetLibraryCategoryResponse
      description: ''
      type: object
      properties:
        category_list:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
              is_leaf:
                type: boolean
              is_root:
                type: boolean
              parent_category_id:
                format: int64
                type: integer
              category_id:
                format: int64
                type: integer
      example:
        category_list:
          - title: 考研
          - title: MBA
    SignInWeChatRequest:
      title: Root Type for SignInWeChatRequest
      description: ''
      type: object
      properties:
        code:
          type: string
      example:
        code: 071b7nFa1JVj0B0ty9Ga1Ia1Vp2b7nF0
    SignInThirdPartyResponse:
      title: Root Type for SignInThirdPartyResponse
      description: ''
      type: object
      properties:
        open_id:
          type: string
        apple_open_id:
          type: string
        need_bind_phone:
          type: boolean
        token:
          type: string
        expire_date:
          format: date-time
          type: string
        bind_token:
          type: string
      example:
        open_id: 000967.32a6037ae44a4ddd9d4517f39ce6beb9.1231
        apple_open_id: 000967.32a6037ae44a4ddd9d4517f39ce6beb9.1231
        need_bind_phone: false
        token: xxx
        expire_date: '2020-03-01T00:00:00Z'
        bind_token: xxx
    UserCouponListResponse:
      title: Root Type for UserCouponListResponse
      description: ''
      type: object
      properties:
        coupons:
          type: array
          items:
            type: object
            properties:
              coupon_id:
                format: int64
                type: integer
              name:
                type: string
              library_book_id:
                format: int64
                type: integer
              category_id:
                format: int64
                type: integer
              description:
                type: string
              end_date:
                format: date-time
                type: string
              discount_type:
                type: string
              discount_value:
                format: int64
                type: integer
              actual_discount_value:
                format: int64
                type: integer
              discount_min:
                format: int64
                type: integer
              discount_max:
                format: int64
                type: integer
              price_min:
                format: int64
                type: integer
              price_max:
                format: int64
                type: integer
              is_consumed:
                type: boolean
              consumed_date:
                format: date-time
                type: string
      example:
        coupons:
          - name: 新人券
            description: 立减五十
            end_date: '2021-04-10 23:26:52'
            discount_type: absolute
            discount_value: 30
            discount_min: 0
            discount_max: 0
            price_min: 0
            price_max: 0
            is_consumed: true
            consumed_date: '2021-04-10 23:26:52'
    LibraryBookReportRequest:
      title: Root Type for LibraryBookReportRequest
      description: ''
      type: object
      properties:
        description:
          type: string
        contact_info:
          type: string
        image_url_list:
          description: ''
          type: array
          items:
            type: string
      example:
        description: some text
        image_url_list:
          - some text
          - some text
          - null
    UpdateMyInfoRequest:
      title: Root Type for UpdateMyInfoRequest
      description: ''
      type: object
      properties:
        location:
          type: string
        birthday:
          format: date
          type: string
        gender:
          type: string
        nickname:
          type: string
        image_url:
          type: string
        profile:
          type: string
      example:
        location: 中国
        birthday: '1995-09-09'
        gender: 男
        nickname: xxx
        image_url: 'http:xxx.png'
        profile: xxxx
    CertifiedCreatorVO:
      type: object
      properties:
        is_certified:
          type: boolean
        creator_name:
          type: string
        domain_name:
          type: string
    CheckValidResponse:
      description: 检验参数是否合法返回体
      type: object
      properties:
        is_valid:
          required: true
          type: boolean
        message:
          description: 如果is_valid=false，则会有message返回
          type: string
    GetLibraryLeaseListResponse:
      title: Root Type for GetLibraryLeaseListResponse
      description: ''
      type: object
      properties:
        lease_list:
          type: array
          items:
            type: object
            properties:
              order:
                type: object
                properties:
                  order_id:
                    format: int64
                    type: integer
                  created_date:
                    format: date-time
                    type: string
                  amount:
                    format: int32
                    type: integer
                  quantity:
                    format: int32
                    type: integer
                  order_status:
                    type: string
                  coupon:
                    type: object
                    properties:
                      amount:
                        format: int32
                        type: integer
                  payment:
                    type: object
                    properties:
                      gateway:
                        type: string
                      amount:
                        format: int32
                        type: integer
              library_book:
                type: object
                properties:
                  title:
                    type: string
                  image_url:
                    type: string
                  library_book_id:
                    format: int64
                    type: integer
              resource_id:
                format: int64
                type: integer
      example:
        lease_list:
          - order:
              order_id: 12
              amount: 60
              coupon:
                amount: 30
              payment:
                gateway: 微信支付
                amount: 30
            library_book:
              title: 刑法攻略
              image_url: image_url
    ForgettingCurveDotsDataRequest:
      title: Root Type for ForgettingCurveDotsDataRequest
      description: ''
      type: object
      properties:
        unused:
          type: integer
    ForgettingCurveDotsDataResponse:
      title: Root Type for ForgettingCurveDotsDataResponse
      description: ''
      type: object
      properties:
        ebbinghaus_curve_dots:
          type: array
          items:
            format: double
            type: number
        memo_algorithm_curve_dots:
          type: array
          items:
            format: double
            type: number
        user_actual_curve_dots:
          type: array
          items:
            format: double
            type: number
      example:
        ebbinghaus_curve_dots: []
        emo_algorithm_curve_dots: []
        user_actual_curve_dots: []
    StudyStat:
      title: Root Type for StudyStat
      description: ''
      type: object
      properties:
        days_count:
          type: object
          properties:
            max_consecutive_study_days:
              format: int32
              type: integer
            current_consecutive_study_days:
              format: int32
              type: integer
            total_study_days:
              format: int32
              type: integer
        daily_study_stat:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
              today_start_time:
                format: date-time
                type: string
              total_study_time_taken:
                format: int32
                type: integer
              again_button_click_times:
                format: int32
                type: integer
              easy_button_click_times:
                format: int32
                type: integer
              good_button_click_times:
                format: int32
                type: integer
              hard_button_click_times:
                format: int32
                type: integer
      example:
        days_count:
          max_consecutive_study_days: 1
          current_consecutive_study_days: 1
          total_study_days: 1
        daily_study_stat:
          - date: '12345678'
            today_start_time: '2021-05-18T21:00:00.000+00:00'
            total_study_time_taken: 12
            again_button_click_times: 1
            easy_button_click_times: 2
            good_button_click_times: 3
            hard_button_click_times: 4
    GetDaysExtensionCountResponse:
      title: Root Type for GetDaysExtensionCountResponse
      description: ''
      type: object
      properties:
        days:
          format: int32
          type: integer
      example:
        days: 1
    StudyPlanParam:
      title: Root Type for StudyPlanParam
      description: ''
      type: object
      properties:
        deck_size:
          format: int32
          type: integer
        learn_card_count_param:
          type: array
          items:
            type: object
            properties:
              days:
                format: int32
                type: integer
              factor:
                format: int32
                type: integer
      example:
        deck_size: 16
        learn_card_count_param:
          - days: 15
            factor: 4
    AppSearchResponse:
      title: Root Type for AppSearchResponse
      description: ''
      type: object
      properties:
        library_book_list:
          type: array
          items:
            type: object
            properties:
              qm_title:
                type: string
              qm_publisher:
                type: string
              qm_cover:
                type: string
              qm_description:
                type: string
              library_book_id:
                format: int64
                type: integer
              origin_book_author:
                type: string
              origin_book_title:
                type: string
              origin_book_cover:
                type: string
              origin_book_description:
                type: string
              category:
                type: string
              expire_date:
                type: string
              package_uuid:
                type: string
              package_editor:
                type: string
              package_proofreader:
                type: string
              copyright:
                type: string
              related_link:
                type: string
      example:
        library_book_list:
          - qm_title: some text
            qm_publisher: some text
            qm_cover: some text
            qm_description: some text
            library_book_id: 30
            origin_book_author: some text
            origin_book_title: some text
            origin_book_cover: some text
            origin_book_description: some text
            category: some text
            expire_date: some text
            package_uuid: some text
            package_editor: some text
            package_proofreader: some text
            copyright: some text
            related_link: some text
    QuoteResponse:
      title: Root Type for QuoteResponse
      description: ''
      type: object
      properties:
        title:
          type: string
        author:
          type: string
      example:
        title: 重复是学习之母。
        author: 狄更斯
    AppInfoResponse:
      title: Root Type for AppInfoResponse
      description: ''
      type: object
      properties:
        creator_gather_url:
          type: string
        china_machine_table:
          type: string
        apple_review_verion:
          type: string
        tencent_app_store_review_version:
          type: string
        app_default_config:
          type: string
      example:
        creator_gather_url: some text
        china_machine_table: some text
        apple_review_verion: v0.0.1
        tencentAppStoreReviewVersion: v0.0.1
    ReviewUgcBookRequest:
      title: Root Type for ReviewUgcBookRequest
      description: ''
      type: object
      properties:
        result:
          type: string
        review_comment:
          type: string
      example:
        result: publish
    RankUgcBookRequest:
      type: object
      properties:
        rank_value:
          format: int32
          type: integer
        recommend:
          format: int32
          type: integer
      example:
        rank_value: 10
        recommend: 1
    UgcBook:
      title: Root Type for UgcBook
      description: ''
      type: object
      properties:
        ugc_book_id:
          format: int64
          type: integer
        library_book_id:
          format: int64
          type: integer
        apkg_uuid:
          type: string
        library_book_name:
          type: string
        library_book_description:
          type: string
        library_book_cover:
          type: string
        price60:
          format: int64
          type: integer
        category:
          type: string
        user_id:
          format: int64
          description: ''
          type: integer
        nick_name:
          description: ''
          type: string
        phone_number:
          type: string
        created_date:
          description: 创建时间
          type: string
        card_count:
          description: ''
          type: integer
        state:
          description: 状态
          type: string
        card_book_link:
          description: 卡册链接
          type: string
        card_book_maker:
          description: 卡册制作
          type: string
        card_book_proofread:
          description: 卡册校对
          type: string
        copyright:
          description: 版权
          type: string
        review_comment:
          type: string
        image_url_list:
          type: array
          items:
            type: string
        anki_package_id:
          format: int64
          description: ''
          type: integer
        original_price:
          description: 图书原价
          type: integer
        marketing_img_url:
          description: 营销图
          type: string
        rank_value:
          format: int32
          type: integer
        recommend:
          format: int32
          type: integer
      example:
        ugc_book_id: 1
        library_book_id: 1
        anki_package_id: 1
        library_book_name: '1'
        library_book_description: '1'
        library_book_cover: x
        price60: 1
        category: '1'
    GetLibraryBookInfo:
      title: Root Type for GetLibraryBookInfo
      description: 图书详情页内容，包括未购和已购两种状态
      type: object
      properties:
        comment_number:
          description: 图书评论数量（感谢作者）
          type: integer
        is_free:
          required: true
          type: boolean
        price_of_book:
          format: int64
          required: true
          type: integer
        recommend:
          format: int32
          required: true
          type: integer
        qm_title:
          required: true
          type: string
        qm_publisher:
          required: true
          type: string
        qm_publisher_user_id:
          format: int64
          required: true
          type: integer
        qm_publisher_image_url:
          required: true
          type: string
        qm_publisher_nickname:
          required: true
          type: string
        qm_publisher_badge_list:
          description: ''
          required: true
          type: array
          items:
            $ref: '#/components/schemas/BadgeResponse'
        qm_cover:
          type: string
        qm_description:
          type: string
        library_book_id:
          format: int64
          required: true
          type: integer
        origin_book_author:
          type: string
        origin_book_title:
          type: string
        origin_book_cover:
          type: string
        origin_book_description:
          type: string
        category:
          required: true
          type: string
        expire_date:
          format: date-time
          description: （已购出现），图书过期时间（已经废弃）
          required: false
          type: string
        is_refundable:
          description: （已购出现）是否允许退款
          required: false
          type: boolean
        book_latest_package_uuid:
          description: 图书对应的package，如果创作者进行了更新，则这个值会发生变化，且与用户购买的 package_uuid不同。建议客户端提示有图书新版本，建议重置学习计划来更新。
          required: true
          type: string
        package_uuid:
          description: 如果未购，为图书对应的package；如果已购，则为用户正在学习的package。可以用于直接学习
          required: true
          type: string
        package_editor:
          type: string
        package_proofreader:
          type: string
        copyright:
          type: string
        related_link:
          type: string
        image_url_list:
          type: array
          items:
            type: string
        card_count:
          format: int32
          required: true
          type: integer
        borrower_count:
          format: int32
          required: true
          type: integer
        learned_card_count:
          format: int32
          description: （已购出现，但现在未购也为0）已经学了多少张卡
          type: integer
        default_exam_plan_in_days:
          format: int64
          description: 关联的考试，还有几天考试
          type: integer
        next_exam_date:
          format: date
          description: 关联的考试，考试日期
          type: string
        flags:
          type: object
          additionalProperties:
            type: string
        original_price:
          description: 图书原价（仅仅是展示用，不参与交易）
          type: integer
        marketing_img_url:
          description: 营销图
          type: string
        marketing_channel_return_amount:
          format: int64
          description: （分享返利）如果成功邀请一人，预计获得的收益（单位为分）
          required: true
          type: integer
        marketing_channel_successful_invited:
          format: int64
          description: （分享返利）已经成功邀请的人数
          required: true
          type: integer
        study_plan_exist:
          type: boolean
        deck_learning_stats:
          description: （已购时不为空）列出每个deck下学习的张数
          type: array
          items:
            $ref: '#/components/schemas/DeckLearningStatVo'
      example:
        qm_title: some text
        qm_publisher: some text
        qm_cover: some text
        qm_description: some text
        library_book_id: 30
        origin_book_author: some text
        origin_book_title: some text
        origin_book_cover: some text
        origin_book_description: some text
        category: some text
        expire_date: some text
        package_uuid: some text
        package_editor: some text
        package_proofreader: some text
        copyright: some text
        related_link: some text
        image_url_list:
          - some text
          - some text
    AnkiDeckVo:
      title: Root Type for AnkiDeckVo
      description: ''
      type: object
      properties:
        id:
          format: int64
          type: integer
        name:
          type: string
        isRoot:
          type: boolean
        parentAnkiDeckId:
          format: int64
          type: integer
        cardIdList:
          type: array
          items:
            format: int64
            type: integer
        order:
          format: int32
          description: deck排序，只会影响同级之间的排序，用于展示章节顺序。注意，修改排序后，请将deck下面的card的全局顺序也一并修改（card序与deck序保持一致）。
          required: false
          type: integer
      example:
        id: 1000000
        name: 2 Spelling
        parentAnkiDeckId: 10000002
        isRoot: false
        cardIdList:
          - 1
          - 2
          - 3
          - 4
          - 5
    DeckLearningStatVo:
      title: '分章节的学习统计信息, 包括本deck和下面所有子deck的数值'
      description: ''
      type: object
      properties:
        id:
          format: int64
          description: deck id
          type: integer
        new_count:
          format: int32
          description: 未学习卡片数量
          type: integer
        learn_count:
          format: int32
          description: 已学习卡片数量（=所有-new-proficient）
          type: integer
        proficient_count:
          format: int32
          description: 已掌握卡片数量
          type: integer
    QueryUgcBookRequest:
      description: ''
      type: object
      properties:
        page_number:
          format: int64
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
        library_book_name:
          description: ''
          type: string
        book_status:
          description: ''
          type: integer
        category:
          type: string
        sort:
          type: object
          properties:
            column:
              enum:
                - rank_value
                - created_date
            asc:
              type: boolean
      example:
        page_number: 0
        page_size: 20
        library_book_name: XXX
        book_status: 0
        category: 法硕
        sort:
          column: rank_value
          asc: true
    PageUgcBook:
      description: ''
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/UgcBook'
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    AnkiPackageResponse:
      description: ankiPackage返回体
      type: object
      properties:
        anki_package_id:
          format: int64
          description: ''
          type: integer
        anki_package_uuid:
          description: ''
          type: string
        name:
          description: ''
          type: string
        card_count:
          description: 卡片数量
        created_date:
          description: 创建日期
          type: string
        status:
          description: 卡册状态
          type: string
    DeleteUgcBookRequest:
      description: ''
      type: object
      properties:
        ugc_book_id_str:
          description: ''
          type: string
    QueryAnkiPackageRequest:
      description: 分页获取ankiPackage请求参数
      type: object
      properties:
        page_number:
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
        name:
          description: ''
          type: string
    PageAnkiPackage:
      description: 分页获取package返回体
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/AnkiPackageResponse'
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        empty:
          description: ''
          type: boolean
    UpdateUgcBookRequest:
      title: Root Type for CreateUgcBookRequest
      description: '    '
      required:
        - library_book_name
        - category
        - price60
      type: object
      properties:
        anki_package_id:
          format: int64
          type: integer
        library_book_name:
          type: string
        category:
          type: string
        price60:
          format: int64
          type: integer
        image_url_list:
          type: array
          items:
            type: string
        copyright:
          description: 版权
          type: string
        card_book_maker:
          description: 卡册制作
          type: string
        card_book_proofread:
          description: 卡册校对
          type: string
        card_book_link:
          description: 卡册链接
          type: string
        library_book_description:
          type: string
        library_book_author:
          type: string
        ugc_book_id:
          format: int64
          description: ''
          type: integer
        library_book_cover:
          type: string
        original_price:
          description: 图书原价
          type: integer
        marketing_img_url:
          description: 营销图
          type: string
      example:
        anki_package_id: 1
        book_name: x
        book_description: x
        category: x
        price60: 30
        book_author: x
    CreateRedeemRequest:
      description: 创建兑换码请求体
      required:
        - type
        - redeem_limit
        - coupon_template_id
      type: object
      properties:
        type:
          description: 生成随机码方式
          type: string
        code_count:
          format: int32
          description: 生成的数量
          type: integer
        redeem_limit:
          description: 可使用次数
          type: integer
        end_time:
          format: date-time
          description: 截至兑换时间
          type: string
        coupon_template_id:
          format: int64
          description: 优惠券模板id
          type: integer
        comment:
          description: 描述
          type: string
        redeem_code:
          description: ''
          type: string
        redeem_name:
          description: 兑换码名字
          type: string
    CreateRedeemResponse:
      description: 创建兑换码返回体
      type: object
      properties:
        batch_code:
          description: 所属提交批次
          type: string
        redeem_code_list:
          description: ''
          type: array
          items:
            type: string
    RedeemVO:
      description: ''
      type: object
      properties:
        redeem_id:
          format: int64
          description: ''
          type: integer
        redeem_code:
          description: ''
          type: string
        redeem_limit:
          description: ''
          type: integer
        redeemed_count:
          description: ''
          type: integer
        end_time:
          description: ''
          type: string
        coupon_template_id:
          format: int64
          description: 优惠券模板
          type: integer
        redeem_name:
          description: ''
          type: string
        coupon_name:
          description: ''
          type: string
    PageRedeem:
      description: 兑换码生成记录分页
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/RedeemVO'
        empty:
          description: ''
          type: boolean
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
    QueryRedeemRequest:
      description: ''
      type: object
      properties:
        page_number:
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
        batch_code:
          description: ''
          type: string
    RedeemConsumeLogVO:
      description: ''
      type: object
      properties:
        id:
          format: int64
          description: ''
          type: integer
        redeem_id:
          format: int64
          description: ''
          type: integer
        user_id:
          format: int64
          description: ''
          type: integer
        created_date:
          description: ''
          type: string
        coupon_name:
          description: ''
          type: string
        coupon_consumed_date:
          description: ''
          type: string
    PageRedeemConsumeLog:
      description: 兑换码生成记录分页
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/RedeemConsumeLogVO'
        empty:
          description: ''
          type: boolean
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
    ChangeApkgTagRequest:
      description: ''
      required:
        - tags
      type: object
      properties:
        tags:
          description: ''
          type: array
          items:
            type: string
    RequestChangePackageName:
      description: ''
      type: object
      properties:
        new_name:
          description: ''
          type: string
    CreateLetterRequest:
      description: 创建letter请求
      required:
        - sender_name
        - content
        - is_private
      type: object
      properties:
        receiver_name:
          description: 接受者名称
          type: string
        sender_name:
          description: 发送者署名
          type: string
        content:
          description: 发送内容
          type: string
        is_private:
          description: 是否私密
          type: boolean
    LetterResponse:
      description: letter创建好了之后的返回值
      required:
        - created_letter_id
      type: object
      properties:
        created_letter_id:
          format: int64
          description: 返回创建好的letterid
          type: integer
    LetterInfoResponse:
      description: letter的详细信息
      required:
        - receiver_name
        - sender_name
        - avatar_url
      type: object
      properties:
        receiver_name:
          description: ''
          type: string
        sender_name:
          description: ''
          type: string
        content:
          description: ''
          type: string
        is_private:
          description: ''
          type: boolean
        avatar_url:
          description: 头像url
          type: string
        comment_list:
          description: 评论列表
          type: array
          items:
            $ref: '#/components/schemas/LetterComment'
    LetterComment:
      description: letter的评论信息
      required:
        - avatar_url
        - content
        - comment_user_name
      type: object
      properties:
        avatar_url:
          description: ''
          type: string
        content:
          description: 评论的内容
          type: string
        comment_user_name:
          description: 评论人的内容
          type: string
    LetterBriefInfo:
      description: 活动页面letter的简介信息
      required:
        - avatar_url
        - content
        - comment_count
      type: object
      properties:
        avatar_url:
          description: ''
          type: string
        content:
          description: ''
          type: string
        comment_count:
          description: 评论的数量
          type: integer
        instance_letter_id:
          format: int64
          description: ''
          type: integer
    CreateLetterCommentRequest:
      description: ''
      required:
        - content
      type: object
      properties:
        content:
          description: ''
          type: string
    ApkgTagInfoVO:
      description: 目录结构中卡包信息
      type: object
      properties:
        ankiPackageId:
          format: int64
          description: apkg卡包id
          type: integer
        ankiPackageUuid:
          description: ''
          type: string
        name:
          description: ''
          type: string
        lastModifiedDate:
          format: date-time
          description: ''
          type: string
        coverImageUrl:
          description: 从ugc book中取得
          type: string
        cardCount:
          description: ''
          type: integer
        libraryBookId:
          format: int64
          description: 可能为空
          type: integer
        ugcBookId:
          format: int64
          description: 可能为空
          type: integer
        qmTitle:
          description: library_book_id对应的图书名称
          type: string
        tags:
          description: 文件的标签集合（不会重复）
          type: array
          items:
            type: string
    ApkgTagResponse:
      description: 用户卡包详情集合
      type: object
      properties:
        apkgList:
          description: 标签情况
          type: array
          items:
            $ref: '#/components/schemas/ApkgTagInfoVO'
    QueryRedeemConsumeLogRequest:
      description: ''
      type: object
      properties:
        page_number:
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
        redeem_id:
          format: int64
          description: ''
          type: integer
    ConsumeRedeemCodeRequest:
      description: ''
      required:
        - redeem_code
      type: object
      properties:
        redeem_code:
          description: ''
          type: string
        channel:
          description: 领取渠道
          type: string
    RedeemGenerationLogVO:
      description: ''
      type: object
      properties:
        redeem_log_id:
          format: int64
          description: ''
          type: integer
        redeem_name:
          description: ''
          type: string
        batch_code:
          description: ''
          type: string
        redeem_number:
          format: int32
          description: ''
          type: integer
        user_name:
          description: ''
          type: string
        created_date:
          description: ''
          type: string
        comment:
          description: ''
          type: string
    PageRedeemGenerationLog:
      description: 兑换码生成记录分页
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/RedeemGenerationLogVO'
        empty:
          description: ''
          type: boolean
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
    QueryRedeemGenerationLogRequest:
      description: ''
      type: object
      properties:
        page_number:
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
        batch_code:
          description: ''
          type: string
    UserPreferenceVO:
      description: ''
      type: object
      properties:
        user_preference_id:
          format: int64
          description: ''
          type: integer
        preference_key:
          description: ''
          type: string
        preference_value:
          description: ''
          type: string
    FeedbackUpdateVO:
      description: ''
      type: object
      properties:
        type:
          description: '必选参数 取值范围 [''感谢作者'', ''内容纠错'']，这里没有设置成required是兼容接口原来的实现。'
          type: string
        source:
          description: 内容来源 卡片页，图书 可选参数
          type: string
        content:
          description: 反馈内容
          type: string
        card_id:
          format: int64
          description: 卡片id 保存感谢作者的时候不需要传
          type: integer
        image_url_list:
          description: 上传图片的url列表，按|分隔
          type: string
        library_book_id:
          format: int64
          description: 输入图书id（新增感谢信时为必传）
          type: integer
        shown:
          description: z只用于修改感谢用户展示状态
          type: boolean
      example:
        type: 内容纠错
        source: 卡片页
        content: XXXX有XXXXBUG
        card_id: 8000
        image_url_list: XXX|XXX|XXX
    AnkiSharedTemplateVO:
      description: ''
      required:
        - owner_user_id
      type: object
      properties:
        anki_package_id:
          format: int64
          description: 引用的packageId
          type: integer
        anki_model_id:
          format: int64
          description: 引用的model Id
          type: integer
        anki_template_id:
          format: int64
          description: 引用的templateId
          type: integer
        termpalteName:
          description: ''
          type: string
        cardFrontFormat:
          description: ''
          type: string
        cardBackFormat:
          description: ''
          type: string
        owner_user_id:
          format: int64
          description: ''
          type: integer
    SharedTemplateRequest:
      description: 创建新的共享模板
      type: object
      properties:
        owner_user_id:
          format: int64
          description: 模板的拥有者
          type: integer
        anki_package_id:
          format: int64
          description: 引用的anki_package_id
          type: integer
        anki_model_id:
          format: int64
          description: 引用的 model id
          type: integer
        anki_template_id:
          format: int64
          description: 引用的template id
          type: integer
        tags:
          description: 标签，用竖线分割
          type: string
        is_public:
          description: 是否共享
          type: boolean
    PageFeedbackResponseVO:
      description: 分页查询反馈信息
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/FeedbackResponseVO'
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    FeedbackResponseVO:
      description: 用户反馈信息
      type: object
      properties:
        feedback_id:
          format: int64
          description: 反馈信息唯一id
          type: integer
        type:
          description: 类型（感谢作者， 问题反馈）
          type: string
        source:
          description: 反馈的页面来源
          type: string
        content:
          description: 反馈（感谢）内容
          type: string
        report_user_id:
          format: int64
          type: integer
        report_user_nickname:
          format: string
          description: 反馈（反馈）人
        card_id:
          format: int64
          description: 卡片id
          type: integer
        library_book_id:
          format: int64
          description: 图书id
          type: integer
        library_book_title:
          description: 图书（卡册）名称
          type: string
        library_book_author:
          description: 图书作者
          type: string
        book_author_id:
          format: int64
          description: 反馈者id
          type: integer
        package_uuid:
          description: 卡册UUID
        image_url_list:
          type: string
          description: 图片列表（反馈问题有可能会用到图片）
        status:
          description: 已读未读（问题反馈API会用到）
          type: string
        created_date:
          type: string
        last_modified_date:
          description: ''
          type: string
        resolved_date:
          description: 问题反馈解决时间
          type: string
        learnt_duration:
          format: double
          description: 用户在该本书下学了多长时间 单位 秒
          type: number
        avatar:
          description: 用户头像
          type: string
        is_shown:
          description: 是否公开展示
          type: boolean
      example:
        feedback_id: 1
        type: 内容纠错
        source: 卡片页
        content: XXXX有XXXXBUG
        report_user_id: 4
        report_user_nickname: frankhh
        card_id: 8001
        library_book_id: 11
        library_book_title: 初级会计经济法2021轻一
        library_book_author: 如果啊如果没有如果
        image_url_list: XXX|XXX|XXX
        status: 未读
        created_date: '2021-07-28T16:58:33.000Z'
        last_modified_date: '2021-07-28T18:01:40.000Z'
        resolved_date: '2021-07-28T18:01:40.000Z'
    ConsumeRedeemCodeResponse:
      description: ''
      type: object
      properties:
        coupon_name:
          description: ''
          type: string
    StatisticsRequest:
      description: ''
      required:
        - end_date
        - start_date
        - event_type
      type: object
      properties:
        event_type:
          description: |-
            {
                "新学习者": "new_learner",
                "活跃学习者": "active_learner",
                "学习完成率": "complete_rate",
                "累计学习者": "total_learner",
                "平均学习时长": "avg_study_length",
                "平均学习卡片数": "avg_study_card"
            }
          type: string
        start_date:
          format: date
          description: ''
          type: string
        end_date:
          format: date
          description: ''
          type: string
    UserTemplateIcpInfo:
      title: Root Type for UserTemplateIcpInfo
      description: ''
      type: object
      properties:
        order_id:
          format: int64
          type: integer
        trial_unlocked_card_id_list:
          type: array
          items:
            format: int64
            type: integer
        template_icp_info:
          type: object
          properties:
            price:
              format: int32
              type: integer
            trail_unlock_limit:
              format: int32
              type: integer
      example:
        order_id: 1
        trial_unlocked_card_id_list:
          - 1
          - 2
          - 3
        template_icp_info:
          price: 100
          trail_unlock_limit: 3
    GildConsumeResponse:
      description: 消耗金箔之后的返回数据
      required:
        - gild_contributed_quantity
        - rest_gild_quantity
      type: object
      properties:
        gild_global_consumed:
          format: int64
          description: 全局已经使用的金箔
          type: integer
        gild_remaining:
          format: int64
          description: 用户还剩余的金箔数量
          type: integer
        gild_consumed:
          format: int64
          description: 用户已经使用过的金箔数量
          type: integer
    GeneralEntityFlagRequest:
      description: 通用实体flag请求体
      type: object
      properties:
        value:
          type: string
      example:
        value: true
    GeneralEntityFlagResponse:
      description: 通用实体flag返回体
      type: object
      properties:
        value:
          type: string
        created_date:
          type: string
        last_modified_date:
          type: string
    CardCommentRequest:
      description: 评论笔记请求体
      type: object
      properties:
        content:
          type: string
      example:
        content: 这里标记一下
    CardCommentResponse:
      description: 评论笔记返回体
      type: object
      properties:
        content:
          type: array
          items:
            type: object
            properties:
              card_id:
                format: int64
                type: integer
              content:
                type: string
              created_date:
                type: string
              last_modified_date:
                type: string
    SearchClickEventRequest:
      description: ''
      type: object
      properties:
        keyword:
          description: ''
          type: string
        book_id:
          format: int64
          description: ''
          type: integer
    GroupBuyConfigSnapshotVO:
      description: 拼团快照VO
      required:
        - max_count
        - min_count
        - group_buy_type
        - fixed_price
      type: object
      properties:
        max_count:
          format: int32
          description: 最大成团人数
          type: integer
        min_count:
          format: int32
          description: 最小成团人数
          type: integer
        duration:
          format: int32
          description: 开团持续时间
          type: integer
        group_buy_type:
          description: 团购类型（固定成团还是阶梯）
          type: string
        fixed_price:
          format: int32
          description: 开团成团的金额
          type: integer
        created_date:
          type: string
        enable_initiate_group:
          format: int32
          description: 是否允许进行拼团
          type: integer
        marketing_channel_ratio:
          format: float
          description: 用户邀请拼团分成
          type: number
        enable_infinite_groupbuy:
          description: 是否是无限拼团 true 开启无限拼团 false 关闭无限拼团
          type: boolean
        automatic_complete_groupbuy:
          description: 是否开启自动完成拼团 true是 false不是
          type: boolean
    GroupBuyInstanceVO:
      description: 拼团实例VO
      required:
        - group_buy_instance_id
        - initiator_user_id
        - group_buy_config_snapshot
        - open_date
        - members
      type: object
      properties:
        group_buy_instance_id:
          format: int64
          type: integer
        initiator_user_id:
          format: int64
          type: integer
        group_buy_config_snapshot:
          $ref: '#/components/schemas/GroupBuyConfigSnapshotVO'
        open_date:
          type: string
        close_date:
          type: string
        status:
          type: string
        members:
          type: array
          items:
            type: object
            properties:
              user_id:
                format: int64
                type: integer
              user_nickname:
                type: string
              user_image_url:
                type: string
              purchase_order_id:
                format: int64
                type: integer
    PageGroupBuyInstanceVO:
      description: 分页查询图书拼团实例
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/GroupBuyInstanceVO'
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    ShortLinkVO:
      description: ''
      type: object
      properties:
        short_link_key:
          description: ''
          required: true
          type: string
        object_id:
          description: 对象ID，目前是订单ID
          required: true
          type: string
        phone_number:
          description: ''
          required: false
          type: string
        acutal_link:
          title: 短链接的原始数据
          required: true
          type: string
    QueryGroupBuyRequest:
      description: ''
      type: object
      properties:
        page_number:
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
    SearchPageCardsVO:
      description: 分页关键词查询cards
      type: object
      properties:
        content:
          type: array
          items:
            type: object
            properties:
              card_id:
                format: int64
                type: integer
              matches_preview:
                type: string
        total_pages:
          format: int64
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int64
          description: ''
          type: integer
        size:
          format: int64
          description: ''
          type: integer
        empty:
          description: ''
          type: boolean
    UserCardInfoVO:
      description: ''
      type: object
      properties:
        card_id:
          format: int64
          description: ''
          type: integer
        note_preview:
          description: ''
          type: string
    PageUserCardInfo:
      description: 用户卡片分页信息
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/UserCardInfoVO'
        empty:
          description: ''
          type: boolean
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
    CreateGroupBuyOrderRequest:
      description: 发起拼团请求体
      type: object
      properties:
        manual_init_study_plan:
          description: '是否初始化学习计划， false:初始化, true:不初始化'
          type: boolean
        marketing_user_id:
          format: int64
          description: 邀请团购的营销用户ID（optional)， 创建返利团购时需要，加入返利团购不需要
          type: integer
        parent_instance_id:
          format: int64
          description: 该邀请团购的父团购实例ID(optional)，当父实例已满员时需要传入此参数创建新的子实例
          type: integer
    IdentityVerifyTokenRequest:
      description: 实名认证请求体
      required:
        - real_name
        - id_number
      type: object
      properties:
        real_name:
          type: string
        id_number:
          type: string
    IdentityVerifyTokenResponse:
      description: 实名认证返回token（30分钟内有效）
      required:
        - verify_token
      type: object
      properties:
        verify_token:
          type: string
    IdentityVerifyResultResponse:
      description: 实名认证结果返回体
      required:
        - is_identified
      type: object
      properties:
        is_identified:
          description: 是否已实名认证
          type: boolean
        message:
          type: string
      example:
        is_identified: false
        message: 认证不通过，可能原因：身份证照片模糊、光线问题造成字体无法识别；身份证照片信息与需认证的身份证姓名不一致；提交的照片为非身份证照片。
    QueryWithdrawalApplicationRequest:
      description: ''
      type: object
      properties:
        page_number:
          description: ''
          type: integer
        page_size:
          description: ''
          type: integer
        withdrawal_status:
          description: "REVIEWING, 待审核/审核中\r\nREJECTED, 已驳回\r\nWITHDRAWING, 提现中/审核通过\r\nWITHDRAW_SUCCESS, 已提现\r\nWITHDRAW_FAIL 提现失败"
          type: string
        user_query_param:
          description: 用户id或这个手机号 app端可以不传入
          type: string
        withdrawal_wallet_type:
          description: 'CREATOR_WALLET(创作者), MARKETING_WALLET(分享者)'
          type: string
        query_all_user:
          description: 是否查询所有， 防止某些接口管理员会查到所有数据
          type: boolean
    PageWithdrawalApplicationVO:
      description: 兑换码生成记录分页
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/WithdrawalApplicationVO'
        empty:
          description: ''
          type: boolean
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
    WithdrawalApplicationVO:
      description: ''
      type: object
      properties:
        user_withdrawal_requests_id:
          format: int64
          description: ''
          type: integer
        user_id:
          format: int64
          description: ''
          type: integer
        user_phone:
          description: ''
          type: string
        withdraw_amount:
          format: double
          description: 提现金额
          type: number
        service_charge:
          format: double
          description: 提现手续费
          type: number
        review_date:
          format: date-time
          description: 审核时间
          type: string
        withdrawal_status:
          description: 提现状态
          type: string
        withdrawal_channel:
          description: 提现渠道
          type: string
        nickname:
          description: 用户昵称
          type: string
        hua_gateway_order_id:
          description: 订单号
          type: string
        created_date:
          format: date-time
          description: 申请提现时间
          type: string
        review_comment:
          description: ''
          type: string
        payment_date:
          format: date-time
          description: 到账时间
          type: string
        withdrawal_error_msg:
          description: 提现失败原因
          type: string
        payment_nickname:
          description: 提现账号
          type: string
        withdrawal_wallet_type:
          description: 'CREATOR_WALLET（创作者收益）, MARKETING_WALLET（分享者收益）'
          type: string
    PageIncomeDetailVO:
      description: 兑换码生成记录分页
      type: object
      properties:
        content:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/IncomeDetailVO'
        empty:
          description: ''
          type: boolean
        first:
          description: ''
          type: boolean
        last:
          description: ''
          type: boolean
        number:
          format: int32
          description: ''
          type: integer
        size:
          format: int32
          description: ''
          type: integer
        total_elements:
          format: int64
          description: ''
          type: integer
        total_pages:
          format: int32
          description: ''
          type: integer
    IncomeDetailVO:
      description: ''
      type: object
      properties:
        transaction_type:
          description: 图书借阅/团购
          type: string
        transaction_name:
          description: 交易名
          type: string
        order_amount:
          format: double
          description: ''
          type: number
        transaction_status:
          description: 交易状态
          type: string
        purchase_order_id:
          description: ''
          type: string
        transaction_channel:
          description: 交易渠道
          type: string
        coupon_discount:
          format: double
          description: 礼券折扣
          type: number
        actual_amount:
          format: double
          description: 实付金额
          type: number
        channel_cost:
          format: double
          description: 支付渠道手续费
          type: number
        campaign_cost:
          format: double
          description: 活动费用，用户邀请返利也使用在这字段
          type: number
        platform_cost:
          format: double
          description: 平台分成
          type: number
        settlement_amount:
          format: double
          description: 结算金额
          type: number
        user_id:
          format: int64
          description: 用户id
          type: integer
        created_date:
          format: date-time
          description: ''
          type: string
        settlement_date:
          format: date-time
          description: 结算时间
          type: string
        nickname:
          description: 购书用户昵称
          type: string
    WithdrawalWalletVO:
      description: 结算钱包
      type: object
      properties:
        balance:
          format: double
          description: |-
            balance = wallet_balance + unrecorded_balance
            余额 = 钱包金额（已入账） + 未入账金额
          type: number
        un_record_amount:
          format: double
          description: 待入账金额
          type: number
        withdraw_amount:
          format: double
          description: 提现中金额
          type: number
        accumulate_income:
          format: double
          description: 累计收入
          type: number
        invite_numbers:
          description: 邀请人数
          type: integer
        wallet_balance:
          format: double
          description: 已入账钱包余额
          type: number
    WithdrawalApplicationRequest:
      description: ''
      required:
        - withdraw_amount
        - wallet_type
        - withdraw_channel
      type: object
      properties:
        withdraw_amount:
          format: int32
          description: 单位为分
          type: integer
        wallet_type:
          description: 'CREATOR_WALLET, MARKETING_WALLET'
          type: string
        withdraw_channel:
          description: 'ALIPAY, WECHAT'
          type: string
    PayBindingInfoVO:
      description: ''
      type: object
      properties:
        pay_user_id:
          description: ALIPAY或WECHAT方的用户id
          type: string
        type:
          description: alipay/wechat
          type: string
        account_name:
          description: 账户名称
          type: string
    ReviewWithdrawalRequest:
      description: ''
      required:
        - pass_review
      type: object
      properties:
        review_comment:
          description: 审核意见
          type: string
        pass_review:
          description: true 审核通过， false 驳回
          type: boolean
    UserPayBindRequest:
      description: 绑定支付请求体
      required:
        - auth_code
      type: object
      properties:
        auth_code:
          description: 支付宝绑定code
          type: string
    BlockPuzzleResponse:
      description: 获取滑块验证拼图返回体
      required:
        - repCode
        - repData
        - success
      type: object
      properties:
        repCode:
          type: string
        repData:
          type: object
          properties:
            originalImageBase64:
              type: string
            jigsawImageBase64:
              type: string
            token:
              type: string
            secretKey:
              type: string
        success:
          type: boolean
    ChannelRequestingAmount:
      description: 统计各渠道待发放（审核中）金额（分）
      type: object
      properties:
        alipay_amount:
          description: 支付宝待发放金额（分）
          type: integer
        wechat_amount:
          description: 微信待发放金额（分）
          type: integer
    WithdrawalRequestInfo:
      description: 用户提现信息
      type: object
      properties:
        available_times:
          description: 剩余可提现次数
          type: integer
    ContentMachineReviewResultVO:
      description: 格式化机审数实体类
      type: object
      properties:
        stats:
          $ref: '#/components/schemas/ReviewStats'
          description: ''
        fields:
          description: ''
          type: array
          items:
            $ref: '#/components/schemas/ReviewField'
    ReviewResult:
      description: ''
      type: object
      properties:
        level:
          description: ''
          type: string
        raw:
          description: ''
          type: string
        labels:
          description: ''
          type: array
          items:
            type: string
    ReviewField:
      description: ''
      type: object
      properties:
        path:
          description: ''
          type: string
        result:
          $ref: '#/components/schemas/ReviewResult'
          description: ''
    ReviewStats:
      description: ''
      type: object
      properties:
        block_num:
          description: 机审不通过数量
          type: integer
        warning_num:
          description: 机审报警数量
          type: integer
    MerchantAccountVO:
      description: 获取商家账户信息
      type: object
      properties:
        alipay_balance:
          description: 支付宝余额 单位 分
          type: integer
        wechat_balance:
          description: 微信账户余额 单位 分
          type: integer
    FixedCardsCountLimitRequest:
      type: object
      properties:
        deck_id:
          format: int64
          required: true
          type: integer
        debut_cards_count_limit_fixed_per_day:
          format: int32
          type: integer
        review_cards_count_limit_fixed_per_day:
          format: int32
          type: integer
    FixedCardsCountLimitResponse:
      type: object
      properties:
        is_cards_count_limit_fixed:
          required: true
          type: boolean
        debut_cards_count_limit_fixed_per_day:
          format: int32
          type: integer
        review_cards_count_limit_fixed_per_day:
          format: int32
          type: integer
    BannerContent:
      description: ''
      type: object
      properties:
        img:
          description: 图片链接
          type: string
        url:
          description: 跳转链接
          type: string
    BannerConfigRequest:
      description: ''
      required:
        - position
        - banner_list
      type: object
      properties:
        banner_list:
          description: 图片信息数组
          type: array
          items:
            $ref: '#/components/schemas/BannerContent'
        position:
          description: |-
            banner图的位置 取值范围（"my", "library"）
            my: 在我的主页展示
            library: 在图书馆页面展示
          type: string
    BannerConfigVO:
      description: ''
      type: object
      properties:
        my:
          description: 我的主页banner图列表
          type: array
          items:
            $ref: '#/components/schemas/BannerContent'
        library:
          description: 图书馆页面banner图列表
          type: array
          items:
            $ref: '#/components/schemas/BannerContent'
    LockedDecksVO:
      type: object
      properties:
        deck_id_list:
          type: array
          items:
            type: integer
            format: int64
        root_deck_id:
          type: integer
          format: int64
    CreateDonationOrderRequest:
      type: object
      properties:
        amount:
          description: 金额，单位：分
          type: integer
    CreateDonationOrderResponse:
      description: 捐赠订单响应
      type: object
      properties:
        order_no:
          format: int64
          type: integer
    DonationDataVO:
      description: 用户捐款记录
      type: object
      properties:
        donated_amount:
          description: 总计捐款金额
          type: integer
        donated_times:
          description: 捐款次数
          type: integer
    AchievementVO:
      description: 成就列表
      type: object
      properties:
        results:
          type: array
          items:
            properties:
              task_key:
                description: 任务对应的key
                type: string
              achieved:
                description: 当前用户是否达成该任务
                type: boolean
    Compensation202111OrderVO:
      type: object
      properties:
        amount:
          description: 差额 单位 分
          type: integer
    TTSRequest:
      type: object
      properties:
        text:
          type: string
          description: 需要朗读的内容
        voice:
          type: string
          enum:
            - aijia
            - aicheng
            - tomoka
            - tomoya
            - indah
            - farah
            - tala
          description: |-
            对应的选项名称为
            aijia - 中/英文（标准女声）
            aicheng - 中/英文（标准男声）
            tomoka - 日语（女声）
            tomoya - 日语（男声）
            indah - 印尼语（女声）
            farah - 马来语（女声）
            tala - 菲律宾语（女声）
    TTSResponse:
      type: object
      properties:
        file_path:
          type: string
          description: 音频 OSS 路径
  securitySchemes:
    jwt:
      scheme: bearer
      type: http
      description: 使用JWT验证
security:
  - {}
  - jwt: []
